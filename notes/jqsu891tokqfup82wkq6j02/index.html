<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Jenkins</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Wiki / Digital Garden"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="zoobhalu"/><meta name="twitter:creator" content="zoobhalu"/><meta property="og:title" content="Jenkins"/><meta property="og:description" content="Personal Wiki / Digital Garden"/><meta property="og:url" content="localhost:3000/notes/jqsu891tokqfup82wkq6j02/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="5/24/2022"/><meta property="article:modified_time" content="7/18/2022"/><link rel="canonical" href="localhost:3000/notes/jqsu891tokqfup82wkq6j02/"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/cc2307f6fd3a2fec.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cc2307f6fd3a2fec.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-709abf7ab5f510de.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-c4b0e551a2150d17.js" defer=""></script><script src="/_next/static/chunks/pages/_app-62c5b93605efada7.js" defer=""></script><script src="/_next/static/chunks/78-13ae6acd5ce7ca5b.js" defer=""></script><script src="/_next/static/chunks/373-2f3879190a46a3d9.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-69449972c2a725d8.js" defer=""></script><script src="/_next/static/4oDSInv8WeDX6cVSprjyl/_buildManifest.js" defer=""></script><script src="/_next/static/4oDSInv8WeDX6cVSprjyl/_ssgManifest.js" defer=""></script><script src="/_next/static/4oDSInv8WeDX6cVSprjyl/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="jenkins"><a aria-hidden="true" class="anchor-heading" href="#jenkins"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Jenkins</h1>
<p>Jenkins is a continuous integration tool that allows continuous development, test and deployment of newly created code. Its a <a href="/notes/qcaw5ht4vcnucydq104gh7v">Build Automation</a> tool.</p>
<ul>
<li>
<p><strong>Easy Installation</strong> - Jenkins is a self contained java based program ready to run with packages for Windows, macOS and Linux operating systems.</p>
</li>
<li>
<p><strong>Easy Configuration</strong> - Easy setup and configured via a web interface which includes error checks and built in help.</p>
</li>
<li>
<p><strong>Plugins</strong> - Lots of plugins available in the Update Centre and integrates with many tools in the <a href="/notes/eoy9t426lmr0wo5rpxm8g69">CI / CD</a> toolchain.</p>
</li>
<li>
<p><strong>Extensible</strong> - In addition to the plugins, Jenkins can be extended by that plugin architecture which provides nearly infinite options for what it can be used for.</p>
</li>
<li>
<p><strong>Distributed</strong> - Jenkins easily distributes work across multiple machines, helping to speed up builds, tests and deployments across multiple platforms.</p>
</li>
</ul>
<p>Jenkins is sort of acting as a middleman between many other tools. Such as <a href="/notes/wf37vjntme0oklsx52ycrn4">Docker</a>, build tools, repositories(<a href="/notes/vxce41k3oxe2gxzgenry4lj">Nexus</a>), deployment servers etc. Hence its needed to be integrated with all these tools, which is where it’s plugins come into the picture. For example:</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654710271/wiki/slqynckdvxzbvnqpgz0c.png"></p>
<p>Jenkins can be used to run tests, build artifacts, publish artifacts, deploy artifacts, send notifications etc.</p>
<h2 id="how-do-you-make-jenkins-work"><a aria-hidden="true" class="anchor-heading" href="#how-do-you-make-jenkins-work"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>How do you make Jenkins work?</h2>
<p>Jenkins User needs to have all the relevant permissions and tools available to it for it to be able to do it’s job.</p>
<ul>
<li>Run tests
<ul>
<li>Make build tools available to execute test commands. Tools like <a title="Private" style="color: brown" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank">devlog.npm (Private)</a>, <a href="/notes/482tfc3v73o3d4p8yi3b4z7">Maven</a>, <a href="/notes/saz485w50o682scob9knhp1">Gradle</a></li>
</ul>
</li>
<li>Configure test environment
<ul>
<li>Such as a test database</li>
</ul>
</li>
<li>To build application
<ul>
<li>Build tools or <a href="/notes/wf37vjntme0oklsx52ycrn4">Docker</a></li>
</ul>
</li>
<li>To publish docker image
<ul>
<li>You need to store credentials in Jenkins so it can access docker repository</li>
</ul>
</li>
</ul>
<h2 id="installing-jenkins"><a aria-hidden="true" class="anchor-heading" href="#installing-jenkins"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Installing Jenkins</h2>
<h3 id="1-install-jenkins-directly-on-the-os"><a aria-hidden="true" class="anchor-heading" href="#1-install-jenkins-directly-on-the-os"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>1. Install Jenkins directly on the OS</h3>
<ul>
<li>Download package and install it</li>
<li>Create a new user for Jenkins on the server</li>
</ul>
<h3 id="2-run-jenkins-as-docker-container"><a aria-hidden="true" class="anchor-heading" href="#2-run-jenkins-as-docker-container"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>2. Run Jenkins as Docker Container</h3>
<ul>
<li><code>docker run -p 8080:8080 -p 50000:50000 -d \ -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts</code></li>
</ul>
<h2 id="initialize-jenkins"><a aria-hidden="true" class="anchor-heading" href="#initialize-jenkins"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Initialize Jenkins</h2>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654758628/wiki/i7bxryvhzmeh9wcuhoz8.png"></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654758825/wiki/kgoeo4x9vbx2bao7wjso.png"></p>
<h3 id="jenkins-roles"><a aria-hidden="true" class="anchor-heading" href="#jenkins-roles"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Jenkins Roles</h3>
<ol>
<li>
<p>Jenkins Administrator</p>
<ul>
<li>Operations or DevOps team</li>
<li>Administers and manages Jenkins</li>
<li>Sets up Jenkins cluster</li>
<li>Installs plugins</li>
<li>Backs up Jenkins data</li>
<li><img src="https://res.cloudinary.com/zubayr/image/upload/v1654759517/wiki/lskadoodou7btzzjecwj.png"></li>
</ul>
</li>
<li>
<p>Jenkins User</p>
<ul>
<li>Developer or DevOps team</li>
<li>Creating the actual jobs for run workflows</li>
</ul>
</li>
</ol>
<h2 id="installing-build-tools"><a aria-hidden="true" class="anchor-heading" href="#installing-build-tools"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Installing build tools</h2>
<p>Depending on what application(programming language used) you’re building, you need to have different tools installed and configured on Jenkins.</p>
<ol>
<li>
<p>Install required plugin on Jenkins</p>
<ul>
<li>This approach can be limited to the input fields provided</li>
<li><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762016/wiki/yoxzochqrzziu0oxoisw.png"></li>
<li><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762087/wiki/war7fpncaxvvo0mooc8k.png"></li>
<li>If a plugin is not available on “Global Tool Configuration” page it can be installed from “Manage Plugins” page</li>
<li><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762206/wiki/mjbfwr6itejojmx7hbs6.png"></li>
</ul>
</li>
<li>
<p>Install those tools directly on the server(where Jenkins is running)</p>
<ul>
<li>This approach is more flexible (scripting is easier)</li>
<li>If your Jenkins is running as a <a href="/notes/wf37vjntme0oklsx52ycrn4">Docker</a> container</li>
<li><code>docker exec -u 0 -it container-id bash</code></li>
<li>Install the tool inside the container based on the distro you’re using(<code>cat /etc/issue</code>)</li>
</ul>
</li>
</ol>
<h2 id="create-a-freestyle-job"><a aria-hidden="true" class="anchor-heading" href="#create-a-freestyle-job"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Create a freestyle job</h2>
<p>Note: Freestyle jobs can be limiting because it can result in chaining freestyle jobs. The configuration is based on UI not scripting. It is not suitable for complex workflows. Plugins are limiting because of input field provided.
Using freestyle jobs for multiple tasks can create chaining of freestyle jobs and its bad. They're for one singular step. You'll need multiple plugins managing them can be tedious.</p>
<p>Select your type of job from “New Item” page
Note: In prod, you’ll usually be dealing with a “Pipeline” job type</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762490/wiki/okcheuvfts7fmczc1lzf.png"></p>
<p>Configure your freestyle job</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762596/wiki/y8a6hducx3kizheoeqov.png"></p>
<p>On “Build” tab, write your shell commands to be executed.
Note: You cannot use commands of plugins you’ve installed, only the programs you’ve installed directly on the server where Jenkins is running.
<strong>You can however “Invoke” the said plugin as a “Build step”</strong></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762838/wiki/t541ooixskhpr6xr6pbg.png"></p>
<p>On Jenkins main view, you’ll find your list of jobs.</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762908/wiki/tevepvm7fv4ewkdfhxfj.png"></p>
<p>You can also preview a build.</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654762944/wiki/cpktacrn5nmocouewzza.png"></p>
<h2 id="configuring-a-git-repository"><a aria-hidden="true" class="anchor-heading" href="#configuring-a-git-repository"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Configuring a <a href="/notes/qkp5jc6pta8a9f35evsbvod">Git</a> repository</h2>
<p>Under “Source Code Management” tab</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654763672/wiki/wpg46yorlqlkp1isdzyc.png"></p>
<p>Use “Jenkins Credentials Provider“ to add credentials</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654763750/wiki/nsidkaihilnbheepedbp.png"></p>
<p>Whenever you run a job, Jenkins will checkout the code locally for latest commits and then it’ll run the job(test, build) against it.</p>
<h2 id="docker-in-jenkins"><a aria-hidden="true" class="anchor-heading" href="#docker-in-jenkins"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Docker in Jenkins</h2>
<p>Making Docker available inside Jenkins</p>
<p>Attaching a volume to Jenkins from the host. Currently our Jenkins is running on a server(where Docker commands are available), we can mount Docker runtime directory from the host into the container as a volume.</p>
<p>Stop and start Jenkins docker container with additional volumes.</p>
<ul>
<li><code>docker stop container-id</code></li>
<li>Move the old Jenkins config to the new container using the existing volume (<code>jenkins_home</code>)</li>
</ul>
<pre><code>docker run -p 8080:8080 -p 50000:50000 -d \
-v jenkins_home:/var/jenkins_home \
-v /var/run/docker.sock:/var/run/docker.sock \
-v $(which docker):/usr/bin/docker jenkins/jenkins:lts
</code></pre>
<ul>
<li><code>docker exec -it container-id bash</code></li>
<li>Run <code>docker</code> to check if it’s available</li>
<li>However, you’ll not be allowed to pull any images, because the Jenkins service user doesn’t have permissions for the docker file(which was mounted from host)
<ul>
<li><code>ls -l /var/run/docker.sock</code></li>
<li>Add permissions for the Jenkins user by logging in as root user on the container</li>
<li><code>docker exec -u 0 -it container-id bash</code></li>
<li><code>chmod 666 /var/run/docker.sock</code></li>
<li>Once done, you’ll be able to use docker commands inside the the Jenkins container while as the Jenkins service user.</li>
</ul>
</li>
</ul>
<p>As part of our freestyle job, you can add shell commands to make an image out of the generated <code>.jar</code> and you can also push it to a docker repository(DockerHub).</p>
<p>For pushing the image to the DockerHub repository, you will need to add credentials to Jenkins.</p>
<p>And to use the credentials(insecure):</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654765785/wiki/wcul2oihla4vtmu0mido.png"></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654765883/wiki/zwd5847ew0gf4mhffq5v.png"></p>
<p>Tag the image using the repository name.</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654765934/wiki/oklywlv24wee6ytbcbvv.png"></p>
<p>If you were using a private repository other than DockerHub, you’d have to specify repository host name as an additional parameter for the <code>docker login</code> command</p>
<p>A more secure way of passing the password is using standard input</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654766232/wiki/ktmvbbujpr4c8hj0h9on.png"></p>
<h2 id="push-docker-image-to-nexus-repository"><a aria-hidden="true" class="anchor-heading" href="#push-docker-image-to-nexus-repository"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Push Docker image to <a href="/notes/vxce41k3oxe2gxzgenry4lj">Nexus</a> repository</h2>
<ul>
<li>Before you can do this, you’ll need to register the Nexus repository’s IP and port explicitly by running <code>vim /etc/docker/daemon.conf</code> on the Nexus host.</li>
</ul>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"insecure-registries"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"nexus-docker-repo-ip-address:port"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>Restart docker `systemctl restart docker</li>
<li>Start Jenkins container</li>
<li>Add the permissions for the Jenkins user to use docker commands(scroll up to “Docker in Jenkins”)</li>
<li>Create credentials for Nexus Docker repository</li>
<li>Putting it all together will look something like</li>
</ul>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654768504/wiki/yxpknd7sgvmkbysemwjj.png"></p>
<p>Notice the Nexus <a href="/notes/mj7tlpbhhzfpg8pbegkkasb">IP Address</a> and port substituted for repository location/name and for <code>docker login</code> the host is mentioned.</p>
<h2 id="pipeline-jobs"><a aria-hidden="true" class="anchor-heading" href="#pipeline-jobs"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Pipeline jobs</h2>
<ul>
<li>Pipeline jobs are more suited for <a href="/notes/eoy9t426lmr0wo5rpxm8g69">CI/CD</a>, you can do scripting - pipeline as code.</li>
<li>To write a new script, go to the “Pipeline” tab after selecting “New item” → “Pipeline job”</li>
<li>
<ul>
<li>A pipeline job is recommended when you want to execute 2 tasks in parallel, or when you need user input if you want to programmatically use conditional statements in your pipeline script or even setting variables.</li>
</ul>
</li>
</ul>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654774358/wiki/jvj6p0ekwiv96sauhtte.png"></p>
<ul>
<li>Scripting is done in <a title="Private" style="color: brown" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank">devlog.groovy (Private)</a></li>
<li>Groovy sandbox means you can execute a limited no. of Groovy functions, for which you don’t need approval from a Jenkins admin.</li>
<li>Inline pipleline scripts are fine for small pipelines but best practice is having the pipeline script in a git repository.</li>
</ul>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654775265/wiki/fg0pusq07odw4l2etqbw.png"></p>
<ul>
<li>The script should be written inside “Jenkinsfile” as the standard.</li>
</ul>
<h2 id="pipeline-syntax"><a aria-hidden="true" class="anchor-heading" href="#pipeline-syntax"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Pipeline Syntax</h2>
<ul>
<li>Scripted
<ul>
<li>First syntax, allows usage of Groovy.</li>
<li>Advanced scripting capabilities, high flexibility.</li>
<li>Difficult to start.</li>
</ul>
</li>
<li>Declarative
<ul>
<li>Was added recently, make it easier to get started</li>
<li>Predefined structure</li>
</ul>
</li>
<li>Required fields (for declarative )
<ul>
<li>“pipeline” must be top level</li>
<li>“agent” where to execute(relevant for Jenkins cluster)</li>
<li>“stages” where the “work” happens</li>
<li>You can have multiple stages within which you will have “steps” which is where the actual commands go.</li>
</ul>
</li>
<li>Required field (for scripted)
<ul>
<li>You simply need “node”</li>
</ul>
</li>
</ul>
<p>An example script after running will look something like</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654776281/wiki/nawyrptgirflydj5n0ij.png"></p>
<h2 id="jenkinsfile-syntax"><a aria-hidden="true" class="anchor-heading" href="#jenkinsfile-syntax"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Jenkinsfile Syntax</h2>
<p><code>#!/usr/bin/env groovy</code> is at the top of the file to let your editor know that you're working with a Groovy script.
Whenever there is a variable inside a string, it has to use double quotes <code>""</code>.</p>
<h3 id="post-attribute"><a aria-hidden="true" class="anchor-heading" href="#post-attribute"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>post</code> attribute</h3>
<p>Executes some logic after all the stages have been executed. It can have conditions with keywords like, <code>always</code> that will run regardless of the outcome of the stages. <code>success</code> will only run if all the stages have succeeded. <code>failure</code> will only run if any of the stages have failed. It basically defines build status or build state changes.</p>
<pre class="language-groovy"><code class="language-groovy">post <span class="token punctuation">{</span>
  always <span class="token punctuation">{</span>
    echo <span class="token string gstring">"This will always run"</span>
  <span class="token punctuation">}</span>
  success <span class="token punctuation">{</span>
    echo <span class="token string gstring">"This will only run if all the stages have succeeded"</span>
  <span class="token punctuation">}</span>
  failure <span class="token punctuation">{</span>
    echo <span class="token string gstring">"This will only run if any of the stages have failed"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In Jenkinsfile, you can define conditionals for each stage.</p>
<pre class="language-groovy"><code class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any
  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Stage 1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      when <span class="token punctuation">{</span>
        expression <span class="token punctuation">{</span>
          BRANCH_NAME <span class="token operator">==</span> <span class="token string gstring">"dev"</span> <span class="token operator">||</span> BRANCH_NAME <span class="token operator">==</span> <span class="token string gstring">"master"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"Will only run if branch is dev or master"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Stage 2'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"Stage 2"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="environmental-variables"><a aria-hidden="true" class="anchor-heading" href="#environmental-variables"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Environmental variables</h3>
<p>You can use environmental variables in your Jenkinsfile which Jenkins has provided out of the box such as <code>BRANCH_NAME</code>. To find the list of available environmental variables, you can see <code>/env-vars.html</code>.</p>
<p>You can define your own environmental variables in Jenkinsfile. They will be available for all the stages.</p>
<pre class="language-groovy"><code class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any
  environment <span class="token punctuation">{</span>
    NEW_VERSION <span class="token operator">=</span> <span class="token string gstring">"1.0.0"</span>
  <span class="token punctuation">}</span>

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Build'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"Building new version: <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>NEW_VERSION<span class="token punctuation">}</span></span>"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Using credentials in Jenkinsfile. You will first have to define them in Jenkins GUI and then bind them to the env variable. For which you'll need "Credentials Binding" plugin.</p>
<pre class="language-groovy"><code class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any
  environment <span class="token punctuation">{</span>
    SERVER_CREDENTIALS <span class="token operator">=</span> <span class="token function">credentials</span><span class="token punctuation">(</span><span class="token string">'server-credentials'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        sh <span class="token string gstring">"<span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>SERVER_CREDENTIALS<span class="token punctuation">}</span></span>"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"deploying the application"</span>
        <span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token function">usernamePassword</span><span class="token punctuation">(</span>credentials<span class="token punctuation">:</span> <span class="token string">'server-credentials'</span><span class="token punctuation">,</span> usernameVariable<span class="token punctuation">:</span> USER<span class="token punctuation">,</span> passwordVariable<span class="token punctuation">:</span> PWD<span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sh <span class="token string gstring">"echo <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>USER<span class="token punctuation">}</span></span> <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>PWD<span class="token punctuation">}</span></span>"</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you need the credentials only for one stage you can use a wrapper and define it inside the stage.</p>
<h3 id="tools-attribute"><a aria-hidden="true" class="anchor-heading" href="#tools-attribute"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>tools</code> attribute</h3>
<p>Basically provides you build tools for your pipeline to build you project. It has to be preconfigured in Jenkins.</p>
<pre class="language-groovy"><code class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any
  tools <span class="token punctuation">{</span>
    maven <span class="token string">'Maven'</span>
  <span class="token punctuation">}</span>

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Build'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"Building..."</span>
        sh <span class="token string">'mvn install'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="parameters-attribute"><a aria-hidden="true" class="anchor-heading" href="#parameters-attribute"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>parameters</code> attribute</h3>
<p>To parameterize your build.</p>
<p>Type of parameters:</p>
<ul>
<li>string (name, defaultvalue, description)</li>
<li>choice (name, choice, description)</li>
<li>booleanParam (name, defaultvalue, description)</li>
</ul>
<pre class="language-groovy"><code class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any
  parameters <span class="token punctuation">{</span>
   <span class="token comment">// string(name: 'VERSION', defaultValue: '', description: 'Version to be deployed on production')</span>
    <span class="token function">choices</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'VERSION'</span><span class="token punctuation">,</span> choice<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'1.1.0'</span><span class="token punctuation">,</span> <span class="token string">'1.2.0'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">'Version to be deployed on production'</span><span class="token punctuation">)</span>
    <span class="token function">booleanParam</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'executeTests'</span><span class="token punctuation">,</span> defaultValue<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      when <span class="token punctuation">{</span>
        expression<span class="token punctuation">{</span>
          params<span class="token punctuation">.</span>executeTests
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"testing..."</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
          echo <span class="token string gstring">"Deploying application...."</span>
          echo <span class="token string gstring">"Version number: <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>params<span class="token punctuation">.</span>VERSION<span class="token punctuation">}</span></span>"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Next time you run the job, it'll pull the latest changes from the Jenkinsfile and you'll be able to "Build with Parameters".</p>
<p>You can use external scripts inside your groovy script. You can also write groovy code inside <code>script</code> attribute in your <code>steps</code>.</p>
<pre class="language-groovy"><code class="language-groovy"><span class="token comment">// groovy script</span>
<span class="token keyword">def</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  echo <span class="token string gstring">"building application"</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  echo <span class="token string gstring">"testing application"</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  echo <span class="token string gstring">"deploying application"</span>
<span class="token punctuation">}</span>

<span class="token keyword">return</span> <span class="token keyword">this</span>
</code></pre>
<pre class="language-groovy"><code class="language-groovy"><span class="token keyword">def</span> gv
<span class="token comment">// making gv global</span>
pipeline <span class="token punctuation">{</span>
  agent any
  stages <span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      steps <span class="token punctuation">{</span>
        script <span class="token punctuation">{</span>
          gv <span class="token operator">=</span> load <span class="token string gstring">"external-script.groovy"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  stage <span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    steps <span class="token punctuation">{</span>
      script <span class="token punctuation">{</span>
        gv<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  stage <span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    steps <span class="token punctuation">{</span>
      script <span class="token punctuation">{</span>
        gv<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  stage <span class="token punctuation">(</span><span class="token string">'deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    steps <span class="token punctuation">{</span>
      script <span class="token punctuation">{</span>
        gv<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>All environment variables from Jenkinsfile are available in the groovy script.</p>
<h3 id="input-parameters-in-jenkinsfile"><a aria-hidden="true" class="anchor-heading" href="#input-parameters-in-jenkinsfile"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Input Parameters in Jenkinsfile</h3>
<p>User can input values for the parameters while running the job.</p>
<pre class="language-groovy"><code class="language-groovy">pipeline <span class="token punctuation">{</span>
  agent any
  stages<span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string">'Deploy'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      input <span class="token punctuation">{</span>
        message<span class="token punctuation">:</span> <span class="token string gstring">"Select the environment to deploy to"</span>
        ok <span class="token string gstring">"Done"</span>
        parameters <span class="token punctuation">{</span>
            <span class="token function">choices</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'ENV'</span><span class="token punctuation">,</span> choice<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dev'</span><span class="token punctuation">,</span> <span class="token string">'staging'</span><span class="token punctuation">,</span> <span class="token string">'production'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">'Version to be deployed on production'</span><span class="token punctuation">)</span>
            <span class="token comment">// this is a scoped parameter, it is not global</span>
            <span class="token comment">// you can also use script block but the syntax for input differs</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      steps <span class="token punctuation">{</span>
        echo <span class="token string gstring">"Deploying application...."</span>
        echo <span class="token string gstring">"Deploying to <span class="token expression"><span class="token punctuation">$</span><span class="token punctuation">{</span>ENV<span class="token punctuation">}</span></span>"</span>
        script <span class="token punctuation">{</span>
          env<span class="token punctuation">.</span>ENV <span class="token operator">=</span> input message<span class="token punctuation">:</span> <span class="token string gstring">"Select environment to deploy to"</span><span class="token punctuation">,</span> ok<span class="token punctuation">:</span> <span class="token string gstring">"Done"</span><span class="token punctuation">,</span> parameters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">choices</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string">'ENV'</span><span class="token punctuation">,</span> choice<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'dev'</span><span class="token punctuation">,</span> <span class="token string">'staging'</span><span class="token punctuation">,</span> <span class="token string">'production'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> description<span class="token punctuation">:</span> <span class="token string">'Version to be deployed on production'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="multibranch-pipeline"><a aria-hidden="true" class="anchor-heading" href="#multibranch-pipeline"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Multibranch Pipeline</h3>
<p>Single branch pipeline would look something like:</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654854298/wiki/nsj9vutzvbdblniztxus.png"></p>
<p>Typically, you’ll run tests on all the branches but you’d execute deployment only on Master branch. Other branches are merged into the Master branch and then the build, deploy jobs are triggered.</p>
<p>Why do you need pipelines for all the branches? So that we can run tests to see everything is working properly on non-Master branches before merge.
We also need different behaviour based on branch. For example: “If branch is master, run test, build and deploy” and “if branch isn’t master, run test and build skip deploy” etc.</p>
<p>Pipelines need to be created dynamically in a Multibranch Pipeline.</p>
<p>Select “Multibranch Pipeline” from the “New Item” page</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654854883/wiki/qbxeuoaytkq6wprkwais.png"></p>
<p>Here, we can use regular expression to filter what branches to include. In this jobs, we’re choosing all the branches on the given repository. The rest of the build configuration will be made in the Jenkinsfile.</p>
<h2 id="jenkins-credentials"><a aria-hidden="true" class="anchor-heading" href="#jenkins-credentials"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Jenkins credentials</h2>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1654858019/wiki/s6tnlznggh5akynpvajl.png"></p>
<p>The credentials feature is thanks to a plugin. There are different credentials plugins that add more options(kinds of credentials).</p>
<p>There are three scopes for credentials, System and Global credentials can be added on “Manage Credentials” view and Project specific credentials can be added from inside the job. System wide credentials will not be accessible inside the project.</p>
<h2 id="jenkins-shared-library"><a aria-hidden="true" class="anchor-heading" href="#jenkins-shared-library"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Jenkins Shared Library</h2>
<p>Lets say we're working with a lot of micro services that contribute to one whole application. In Jenkins we'd use multi branch pipelines for each of that microservice. We'd build each of the microservice as a separate application; meaning you'd have multiple projects with multiple Jenkinsfiles for building those pipelines. Most of the logic in the Jenkinsfile would be same for all the applications in this case. Building <code>.jar</code>, building Docker images, pushing to Nexus repository...all these steps will be same for all the applications. To keep this aligned with DRY and to make this process efficient we use <strong>Jenkins Shared Library</strong>.</p>
<ul>
<li>
<p>It is an extension to Pipelines.</p>
</li>
<li>
<p>It is it's own repository written in Groovy(just like Jenkinsfile).</p>
</li>
<li>
<p>We can write all the logic that is going to be shared across many different applications in a Shared Library and reference that logic in the Jenkinsfile in each project. (Basically, function calls in the Jenkinsfile).</p>
</li>
<li>
<p>It can also be used with different projects(with different teams).</p>
</li>
<li>
<p>If not all the steps are same in the Jenkinsfile across those different projects, whatever logic is common among those projects can be referenced from Shared Library instead of repeating the logic across multiple Jenkinsfile. E.g.</p>
<ul>
<li>Company wide Nexus repository.</li>
<li>Company wide slack channel.</li>
</ul>
</li>
</ul>
<h3 id="create-a-shared-library"><a aria-hidden="true" class="anchor-heading" href="#create-a-shared-library"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Create a Shared Library</h3>
<ol>
<li>Init a git repository.</li>
<li>Create a Groovy project in Maven and write the functions.</li>
<li>Make the Shared Library available throughout Jenkins/or specific pipeline.</li>
<li>Use the Shared Library in Jenkinsfile to extend the Pipeline.</li>
</ol>
<h3 id="structure-of-shared-library"><a aria-hidden="true" class="anchor-heading" href="#structure-of-shared-library"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Structure of Shared Library</h3>
<ul>
<li>Create a Groovy project in Maven.</li>
<li>Main folder <code>vars</code> contains all the functions that we're going to call from a Jenkinsfile.</li>
<li>Each function/execution step will be in its own Groovy script(inside <code>vars</code>).</li>
<li><code>src</code> folder contains helper logic(utility code etc).</li>
<li><code>resources</code> folder is where you'll keep your non-Groovy code(SQL scripts, external libraries, Powershell scripts, JSON files etc).</li>
</ul>
<pre class="language-groovy"><code class="language-groovy"><span class="token shebang comment">#!/usr/bin/env groovy</span>

<span class="token comment">// vars/buildJar.groovy; functions(execution steps) are referenced by their filename</span>

<span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// here is where the logic goes</span>
  echo <span class="token string gstring">"Building the application"</span>
  sh <span class="token string gstring">"mvn package"</span>
<span class="token punctuation">}</span>

</code></pre>
<ul>
<li>Commit and push the code the git repository.</li>
<li>Make shared library available globally.</li>
</ul>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1658158197/wiki/h0ffz078kfggwfsddytc.png"></p>
<p>Default version can either be a branch name, a commit hash or a tag. Having a fixed version is a good idea(to avoid breaking changes stopping a pipeline).</p>
<ul>
<li>To use Shared Library in your Jenkinsfile:
<ul>
<li>You'll need to import the Library in your Jenkinsfile.</li>
<li><code>@Library("jenkins-shared-library")_</code> you'll need to add an underscore at the end of the <code>@Library</code> call if you don't have any variable/function definitions/calls and have <code>pipeline{}</code> directly after.</li>
</ul>
</li>
</ul>
<pre class="language-groovy"><code class="language-groovy"><span class="token shebang comment">#!/usr/bin/env groovy</span>
<span class="token annotation punctuation">@Library</span><span class="token punctuation">(</span><span class="token string gstring">"jenkins-shared-library"</span><span class="token punctuation">)</span> <span class="token comment">// defined in Global Pipeline Libraries</span>

<span class="token keyword">def</span> gv

pipeline<span class="token punctuation">{</span>
  agent any
  tools<span class="token punctuation">{</span>
    maven <span class="token string">'Maven'</span>
  <span class="token punctuation">}</span>
  stages<span class="token punctuation">{</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string gstring">"init"</span><span class="token punctuation">)</span>
    <span class="token punctuation">...</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string gstring">"build jar"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      steps<span class="token punctuation">{</span>
        script<span class="token punctuation">{</span>
          <span class="token function">buildJar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">stage</span><span class="token punctuation">(</span><span class="token string gstring">"build images"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      steps<span class="token punctuation">{</span>
        script<span class="token punctuation">{</span>
          <span class="token function">buildImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li>Commit/push the changes to remote repo of the Jenkinsfile.</li>
</ul>
<h3 id="passing-parameters-to-methods"><a aria-hidden="true" class="anchor-heading" href="#passing-parameters-to-methods"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Passing Parameters to Methods</h3>
<pre class="language-groovy"><code class="language-groovy"><span class="token shebang comment">#!/usr/bin/env groovy</span>

<span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span>String imageName<span class="token punctuation">)</span><span class="token punctuation">{</span>
  sh <span class="token string gstring">"docker build -t <span class="token expression"><span class="token punctuation">$</span>imageName</span> ."</span>
  sh <span class="token string gstring">"docker push <span class="token expression"><span class="token punctuation">$</span>imageName</span>"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>We can access global variables. We've all the environmental variables available in the Jenkinsfile also available in the Shared Library.</p>
<p><strong>To extract logic into Groovy classes</strong>:</p>
<p>We can add a function's logic to a standalone file inside the <code>src</code> folder inside a class in a <code>package</code>.</p>
<p>However, unlike the Shared Library, we do NOT have access to the global/environmental variables when we use separate classes. To make pipeline syntax available we use <code>script</code> keyword as parameter to the class's function.</p>
<pre class="language-groovy"><code class="language-groovy"><span class="token comment">// Docker.groovy</span>
<span class="token shebang comment">#!/usr/bin/env groovy</span>

<span class="token keyword">package</span> com<span class="token punctuation">.</span>example

<span class="token keyword">class</span> <span class="token class-name">Docker</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span><span class="token punctuation">{</span>
  <span class="token comment">// `implements Serializable` to support saving the state of the execution if the pipeline is paused and then resumed.</span>
  <span class="token keyword">def</span> script

  <span class="token function">Docker</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>script <span class="token operator">=</span> script
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> <span class="token function">buildDockerImage</span><span class="token punctuation">(</span>String imageName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        script<span class="token punctuation">.</span>echo <span class="token string gstring">"building the docker image..."</span>
        script<span class="token punctuation">.</span>sh <span class="token string gstring">"docker build -t <span class="token expression"><span class="token punctuation">$</span>imageName</span> ."</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">dockerLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        script<span class="token punctuation">.</span><span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token punctuation">[</span>script<span class="token punctuation">.</span><span class="token function">usernamePassword</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">'docker-hub-repo'</span><span class="token punctuation">,</span> passwordVariable<span class="token punctuation">:</span> <span class="token string">'PASS'</span><span class="token punctuation">,</span> usernameVariable<span class="token punctuation">:</span> <span class="token string">'USER'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            script<span class="token punctuation">.</span>sh <span class="token string gstring">"echo <span class="token expression"><span class="token punctuation">$</span>script<span class="token punctuation">.</span>PASS</span> | docker login -u <span class="token expression"><span class="token punctuation">$</span>script<span class="token punctuation">.</span>USER</span> --password-stdin"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">def</span> <span class="token function">dockerPush</span><span class="token punctuation">(</span>String imageName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        script<span class="token punctuation">.</span>sh <span class="token string gstring">"docker push <span class="token expression"><span class="token punctuation">$</span>imageName</span>"</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<p>To call this function inside the <code>vars</code>'s groovy scripts</p>
<p><strong>Note</strong>: You can actually just call these class function directly to your Jenkinsfile instead of calling it in <code>vars</code> folder. But it is a best practice to call them in <code>vars</code> folder as an interface.</p>
<p>These are just making calls to different function in a single class.</p>
<pre class="language-groovy"><code class="language-groovy"><span class="token comment">// buildImage.groovy</span>
<span class="token shebang comment">#!/usr/bin/env groovy</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>Docker
<span class="token keyword">def</span> call <span class="token punctuation">(</span>String imageName<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// passing context from this function to the Docker class using `this` keyword</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docker</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildDockerImage</span><span class="token punctuation">(</span>imageName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-groovy"><code class="language-groovy"><span class="token comment">// dockerLogin.groovy</span>
<span class="token shebang comment">#!/usr/bin/env groovy</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>Docker

<span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docker</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dockerLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-groovy"><code class="language-groovy"><span class="token comment">// dockerPush.groovy</span>
<span class="token shebang comment">#!/usr/bin/env groovy</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>Docker

<span class="token keyword">def</span> <span class="token function">call</span><span class="token punctuation">(</span>String imageName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docker</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dockerPush</span><span class="token punctuation">(</span>imageName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You will call these function in your <code>Jenkinsfile</code></p>
<p>An alternative to having a Globally imported Shared Library, we can reference the library directly in the Jenkinsfile.</p>
<p>Instead of using <code>@Library(jenkins-shared-library@master)...</code> use:</p>
<pre><code>library identifier: 'jenkins-shared-library@master', retriever: modernSCM(
    [$class: 'GitSCMSource',
    remote: 'https://gitlab.com/user/shared-library.git',
    credentialsID: 'gitlab-credentials'
    ]
  )
</code></pre>
<h2 id="webhooks"><a aria-hidden="true" class="anchor-heading" href="#webhooks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Webhooks</h2>
<h2 id="code-source"><a aria-hidden="true" class="anchor-heading" href="#code-source"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Code source</h2>
<ul>
<li><a href="https://gitlab.com/nanuchi/jenkins-shared-library">nanuchi/jenkins-shared-library · GitLab</a></li>
</ul>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/522ww47pqvt6y0yj8zparmy">DevOps</a></li>
<li><a href="/notes/ajojjq9tu40v2rnmzktfyeo">AWS CodeBuild</a></li>
<li><a href="/notes/uu932tw90r0gvvg8maqr3s1">AWS IAM</a></li>
<li><a href="/notes/5151o31s5jmalwws5joksse">DevOps Best Practices</a></li>
<li><a href="/notes/rslamxyhwny92aooavg497t">Jenkins with-on AWS</a></li>
<li><a href="/notes/qcaw5ht4vcnucydq104gh7v">Build Automation</a></li>
<li><a href="/notes/5eybx5vd339tjnkglx8igde">Devops Interview Questions</a></li>
<li><a href="/notes/vxce41k3oxe2gxzgenry4lj">Nexus</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#how-do-you-make-jenkins-work" title="How do you make Jenkins work?">How do you make Jenkins work?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#installing-jenkins" title="Installing Jenkins">Installing Jenkins</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#1-install-jenkins-directly-on-the-os" title="1. Install Jenkins directly on the OS">1. Install Jenkins directly on the OS</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#2-run-jenkins-as-docker-container" title="2. Run Jenkins as Docker Container">2. Run Jenkins as Docker Container</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#initialize-jenkins" title="Initialize Jenkins">Initialize Jenkins</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#jenkins-roles" title="Jenkins Roles">Jenkins Roles</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#installing-build-tools" title="Installing build tools">Installing build tools</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#create-a-freestyle-job" title="Create a freestyle job">Create a freestyle job</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#configuring-a-devloggit-repository" title="Configuring a devlog.Git repository">Configuring a devlog.Git repository</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#docker-in-jenkins" title="Docker in Jenkins">Docker in Jenkins</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#push-docker-image-to-devlognexus-repository" title="Push Docker image to devlog.nexus repository">Push Docker image to devlog.nexus repository</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#pipeline-jobs" title="Pipeline jobs">Pipeline jobs</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#pipeline-syntax" title="Pipeline Syntax">Pipeline Syntax</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#jenkinsfile-syntax" title="Jenkinsfile Syntax">Jenkinsfile Syntax</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#post-attribute" title="post attribute">post attribute</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#environmental-variables" title="Environmental variables">Environmental variables</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tools-attribute" title="tools attribute">tools attribute</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#parameters-attribute" title="parameters attribute">parameters attribute</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#input-parameters-in-jenkinsfile" title="Input Parameters in Jenkinsfile">Input Parameters in Jenkinsfile</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#multibranch-pipeline" title="Multibranch Pipeline">Multibranch Pipeline</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#jenkins-credentials" title="Jenkins credentials">Jenkins credentials</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#jenkins-shared-library" title="Jenkins Shared Library">Jenkins Shared Library</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#create-a-shared-library" title="Create a Shared Library">Create a Shared Library</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#structure-of-shared-library" title="Structure of Shared Library">Structure of Shared Library</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#passing-parameters-to-methods" title="Passing Parameters to Methods">Passing Parameters to Methods</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#webhooks" title="Webhooks">Webhooks</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#code-source" title="Code source">Code source</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"jqsu891tokqfup82wkq6j02","title":"Jenkins","desc":"","updated":1658169523669,"created":1653430069215,"custom":{},"fname":"devlog.jenkins","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"1f064dd89422c64bcff21fa76cebe06c","links":[{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.build automation","alias":"devlog.build automation","position":{"start":{"line":2,"column":127,"offset":127},"end":{"line":2,"column":154,"offset":154},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.build automation"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.CI⁄CD pipeline","alias":"CI / CD","position":{"start":{"line":8,"column":102,"offset":533},"end":{"line":8,"column":135,"offset":566},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.CI⁄CD pipeline"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.docker","alias":"devlog.docker","position":{"start":{"line":14,"column":76,"offset":978},"end":{"line":14,"column":93,"offset":995},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.docker"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.nexus","alias":"devlog.nexus","position":{"start":{"line":14,"column":121,"offset":1023},"end":{"line":14,"column":137,"offset":1039},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.nexus"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.npm","alias":"devlog.npm","position":{"start":{"line":25,"column":69,"offset":1626},"end":{"line":25,"column":83,"offset":1640},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.npm"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.maven","alias":"devlog.maven","position":{"start":{"line":25,"column":85,"offset":1642},"end":{"line":25,"column":101,"offset":1658},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.maven"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.gradle","alias":"devlog.gradle","position":{"start":{"line":25,"column":103,"offset":1660},"end":{"line":25,"column":120,"offset":1677},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.gradle"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.docker","alias":"devlog.docker","position":{"start":{"line":29,"column":20,"offset":1777},"end":{"line":29,"column":37,"offset":1794},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.docker"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.docker","alias":"devlog.docker","position":{"start":{"line":79,"column":38,"offset":3647},"end":{"line":79,"column":55,"offset":3664},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.docker"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.Git","alias":"devlog.Git","position":{"start":{"line":111,"column":18,"offset":5242},"end":{"line":111,"column":32,"offset":5256},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.Git"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.nexus","alias":"devlog.nexus","position":{"start":{"line":170,"column":25,"offset":7878},"end":{"line":170,"column":41,"offset":7894},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.nexus"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.ip address","alias":"devlog.ip address","position":{"start":{"line":188,"column":18,"offset":8526},"end":{"line":188,"column":39,"offset":8547},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.ip address"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.CI⁄CD pipeline","alias":"CI/CD","position":{"start":{"line":192,"column":37,"offset":8699},"end":{"line":192,"column":68,"offset":8730},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.CI⁄CD pipeline"}},{"type":"wiki","from":{"fname":"devlog.jenkins","id":"jqsu891tokqfup82wkq6j02","vaultName":"Dendron"},"value":"devlog.groovy","alias":"devlog.groovy","position":{"start":{"line":198,"column":24,"offset":9204},"end":{"line":198,"column":41,"offset":9221},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.groovy"}},{"from":{"fname":"areas.devops","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":147,"column":5,"offset":4382},"end":{"line":147,"column":23,"offset":4400},"indent":[]},"value":"devlog.Jenkins","alias":"devlog.Jenkins"},{"from":{"fname":"devlog.AWS CodeBuild","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":2,"column":121,"offset":121},"end":{"line":2,"column":139,"offset":139},"indent":[]},"value":"devlog.Jenkins","alias":"devlog.Jenkins"},{"from":{"fname":"devlog.AWS IAM","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":15,"column":96,"offset":1351},"end":{"line":15,"column":114,"offset":1369},"indent":[]},"value":"devlog.jenkins","alias":"devlog.jenkins"},{"from":{"fname":"devlog.AWS IAM","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":15,"column":190,"offset":1445},"end":{"line":15,"column":208,"offset":1463},"indent":[]},"value":"devlog.Jenkins","alias":"devlog.Jenkins"},{"from":{"fname":"devlog.DevOps Best Practices","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":4,"column":44,"offset":202},"end":{"line":4,"column":62,"offset":220},"indent":[]},"value":"devlog.jenkins","alias":"devlog.jenkins"},{"from":{"fname":"devlog.Jenkins with-on AWS","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":19,"offset":19},"indent":[]},"value":"devlog.Jenkins","alias":"devlog.Jenkins"},{"from":{"fname":"devlog.build automation","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":2,"column":12,"offset":12},"end":{"line":2,"column":30,"offset":30},"indent":[]},"value":"devlog.jenkins","alias":"devlog.jenkins"},{"from":{"fname":"devlog.build automation","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":12,"column":70,"offset":468},"end":{"line":12,"column":88,"offset":486},"indent":[]},"value":"devlog.jenkins","alias":"devlog.jenkins"},{"from":{"fname":"devlog.devops interview questions","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":134,"column":64,"offset":6108},"end":{"line":134,"column":82,"offset":6126},"indent":[]},"value":"devlog.Jenkins","alias":"devlog.Jenkins"},{"from":{"fname":"devlog.nexus","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":15,"column":174,"offset":1014},"end":{"line":15,"column":192,"offset":1032},"indent":[]},"value":"devlog.jenkins","alias":"devlog.jenkins"}],"anchors":{"how-do-you-make-jenkins-work":{"type":"header","text":"How do you make Jenkins work?","value":"how-do-you-make-jenkins-work","line":26,"column":0,"depth":2},"installing-jenkins":{"type":"header","text":"Installing Jenkins","value":"installing-jenkins","line":39,"column":0,"depth":2},"1-install-jenkins-directly-on-the-os":{"type":"header","text":"1. Install Jenkins directly on the OS","value":"1-install-jenkins-directly-on-the-os","line":41,"column":0,"depth":3},"2-run-jenkins-as-docker-container":{"type":"header","text":"2. Run Jenkins as Docker Container","value":"2-run-jenkins-as-docker-container","line":46,"column":0,"depth":3},"initialize-jenkins":{"type":"header","text":"Initialize Jenkins","value":"initialize-jenkins","line":50,"column":0,"depth":2},"jenkins-roles":{"type":"header","text":"Jenkins Roles","value":"jenkins-roles","line":56,"column":0,"depth":3},"installing-build-tools":{"type":"header","text":"Installing build tools","value":"installing-build-tools","line":71,"column":0,"depth":2},"create-a-freestyle-job":{"type":"header","text":"Create a freestyle job","value":"create-a-freestyle-job","line":89,"column":0,"depth":2},"configuring-a-devloggit-repository":{"type":"header","text":"Configuring a devlog.Git repository","value":"configuring-a-devloggit-repository","line":117,"column":0,"depth":2},"docker-in-jenkins":{"type":"header","text":"Docker in Jenkins","value":"docker-in-jenkins","line":129,"column":0,"depth":2},"push-docker-image-to-devlognexus-repository":{"type":"header","text":"Push Docker image to devlog.nexus repository","value":"push-docker-image-to-devlognexus-repository","line":176,"column":0,"depth":2},"pipeline-jobs":{"type":"header","text":"Pipeline jobs","value":"pipeline-jobs","line":196,"column":0,"depth":2},"pipeline-syntax":{"type":"header","text":"Pipeline Syntax","value":"pipeline-syntax","line":212,"column":0,"depth":2},"jenkinsfile-syntax":{"type":"header","text":"Jenkinsfile Syntax","value":"jenkinsfile-syntax","line":233,"column":0,"depth":2},"post-attribute":{"type":"header","text":"post attribute","value":"post-attribute","line":238,"column":0,"depth":3},"environmental-variables":{"type":"header","text":"Environmental variables","value":"environmental-variables","line":281,"column":0,"depth":3},"tools-attribute":{"type":"header","text":"tools attribute","value":"tools-attribute","line":338,"column":0,"depth":3},"parameters-attribute":{"type":"header","text":"parameters attribute","value":"parameters-attribute","line":360,"column":0,"depth":3},"input-parameters-in-jenkinsfile":{"type":"header","text":"Input Parameters in Jenkinsfile","value":"input-parameters-in-jenkinsfile","line":465,"column":0,"depth":3},"multibranch-pipeline":{"type":"header","text":"Multibranch Pipeline","value":"multibranch-pipeline","line":495,"column":0,"depth":3},"jenkins-credentials":{"type":"header","text":"Jenkins credentials","value":"jenkins-credentials","line":514,"column":0,"depth":2},"jenkins-shared-library":{"type":"header","text":"Jenkins Shared Library","value":"jenkins-shared-library","line":522,"column":0,"depth":2},"create-a-shared-library":{"type":"header","text":"Create a Shared Library","value":"create-a-shared-library","line":535,"column":0,"depth":3},"structure-of-shared-library":{"type":"header","text":"Structure of Shared Library","value":"structure-of-shared-library","line":542,"column":0,"depth":3},"passing-parameters-to-methods":{"type":"header","text":"Passing Parameters to Methods","value":"passing-parameters-to-methods","line":608,"column":0,"depth":3},"webhooks":{"type":"header","text":"Webhooks","value":"webhooks","line":713,"column":0,"depth":2},"code-source":{"type":"header","text":"Code source","value":"code-source","line":715,"column":0,"depth":2}},"children":[],"parent":"9gtn7g40cvqui0sifl1s7t5","data":{}},"body":"\u003ch1 id=\"jenkins\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#jenkins\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eJenkins\u003c/h1\u003e\n\u003cp\u003eJenkins is a continuous integration tool that allows continuous development, test and deployment of newly created code. Its a \u003ca href=\"/notes/qcaw5ht4vcnucydq104gh7v\"\u003eBuild Automation\u003c/a\u003e tool.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eEasy Installation\u003c/strong\u003e - Jenkins is a self contained java based program ready to run with packages for Windows, macOS and Linux operating systems.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eEasy Configuration\u003c/strong\u003e - Easy setup and configured via a web interface which includes error checks and built in help.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003ePlugins\u003c/strong\u003e - Lots of plugins available in the Update Centre and integrates with many tools in the \u003ca href=\"/notes/eoy9t426lmr0wo5rpxm8g69\"\u003eCI / CD\u003c/a\u003e toolchain.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eExtensible\u003c/strong\u003e - In addition to the plugins, Jenkins can be extended by that plugin architecture which provides nearly infinite options for what it can be used for.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eDistributed\u003c/strong\u003e - Jenkins easily distributes work across multiple machines, helping to speed up builds, tests and deployments across multiple platforms.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eJenkins is sort of acting as a middleman between many other tools. Such as \u003ca href=\"/notes/wf37vjntme0oklsx52ycrn4\"\u003eDocker\u003c/a\u003e, build tools, repositories(\u003ca href=\"/notes/vxce41k3oxe2gxzgenry4lj\"\u003eNexus\u003c/a\u003e), deployment servers etc. Hence its needed to be integrated with all these tools, which is where it’s plugins come into the picture. For example:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654710271/wiki/slqynckdvxzbvnqpgz0c.png\"\u003e\u003c/p\u003e\n\u003cp\u003eJenkins can be used to run tests, build artifacts, publish artifacts, deploy artifacts, send notifications etc.\u003c/p\u003e\n\u003ch2 id=\"how-do-you-make-jenkins-work\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#how-do-you-make-jenkins-work\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eHow do you make Jenkins work?\u003c/h2\u003e\n\u003cp\u003eJenkins User needs to have all the relevant permissions and tools available to it for it to be able to do it’s job.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRun tests\n\u003cul\u003e\n\u003cli\u003eMake build tools available to execute test commands. Tools like \u003ca title=\"Private\" style=\"color: brown\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\"\u003edevlog.npm (Private)\u003c/a\u003e, \u003ca href=\"/notes/482tfc3v73o3d4p8yi3b4z7\"\u003eMaven\u003c/a\u003e, \u003ca href=\"/notes/saz485w50o682scob9knhp1\"\u003eGradle\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eConfigure test environment\n\u003cul\u003e\n\u003cli\u003eSuch as a test database\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTo build application\n\u003cul\u003e\n\u003cli\u003eBuild tools or \u003ca href=\"/notes/wf37vjntme0oklsx52ycrn4\"\u003eDocker\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTo publish docker image\n\u003cul\u003e\n\u003cli\u003eYou need to store credentials in Jenkins so it can access docker repository\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"installing-jenkins\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#installing-jenkins\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eInstalling Jenkins\u003c/h2\u003e\n\u003ch3 id=\"1-install-jenkins-directly-on-the-os\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#1-install-jenkins-directly-on-the-os\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e1. Install Jenkins directly on the OS\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDownload package and install it\u003c/li\u003e\n\u003cli\u003eCreate a new user for Jenkins on the server\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"2-run-jenkins-as-docker-container\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#2-run-jenkins-as-docker-container\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e2. Run Jenkins as Docker Container\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edocker run -p 8080:8080 -p 50000:50000 -d \\ -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"initialize-jenkins\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#initialize-jenkins\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eInitialize Jenkins\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654758628/wiki/i7bxryvhzmeh9wcuhoz8.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654758825/wiki/kgoeo4x9vbx2bao7wjso.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"jenkins-roles\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#jenkins-roles\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eJenkins Roles\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eJenkins Administrator\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOperations or DevOps team\u003c/li\u003e\n\u003cli\u003eAdministers and manages Jenkins\u003c/li\u003e\n\u003cli\u003eSets up Jenkins cluster\u003c/li\u003e\n\u003cli\u003eInstalls plugins\u003c/li\u003e\n\u003cli\u003eBacks up Jenkins data\u003c/li\u003e\n\u003cli\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654759517/wiki/lskadoodou7btzzjecwj.png\"\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eJenkins User\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDeveloper or DevOps team\u003c/li\u003e\n\u003cli\u003eCreating the actual jobs for run workflows\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"installing-build-tools\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#installing-build-tools\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eInstalling build tools\u003c/h2\u003e\n\u003cp\u003eDepending on what application(programming language used) you’re building, you need to have different tools installed and configured on Jenkins.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eInstall required plugin on Jenkins\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThis approach can be limited to the input fields provided\u003c/li\u003e\n\u003cli\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762016/wiki/yoxzochqrzziu0oxoisw.png\"\u003e\u003c/li\u003e\n\u003cli\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762087/wiki/war7fpncaxvvo0mooc8k.png\"\u003e\u003c/li\u003e\n\u003cli\u003eIf a plugin is not available on “Global Tool Configuration” page it can be installed from “Manage Plugins” page\u003c/li\u003e\n\u003cli\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762206/wiki/mjbfwr6itejojmx7hbs6.png\"\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eInstall those tools directly on the server(where Jenkins is running)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThis approach is more flexible (scripting is easier)\u003c/li\u003e\n\u003cli\u003eIf your Jenkins is running as a \u003ca href=\"/notes/wf37vjntme0oklsx52ycrn4\"\u003eDocker\u003c/a\u003e container\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edocker exec -u 0 -it container-id bash\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eInstall the tool inside the container based on the distro you’re using(\u003ccode\u003ecat /etc/issue\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"create-a-freestyle-job\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#create-a-freestyle-job\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eCreate a freestyle job\u003c/h2\u003e\n\u003cp\u003eNote: Freestyle jobs can be limiting because it can result in chaining freestyle jobs. The configuration is based on UI not scripting. It is not suitable for complex workflows. Plugins are limiting because of input field provided.\nUsing freestyle jobs for multiple tasks can create chaining of freestyle jobs and its bad. They're for one singular step. You'll need multiple plugins managing them can be tedious.\u003c/p\u003e\n\u003cp\u003eSelect your type of job from “New Item” page\nNote: In prod, you’ll usually be dealing with a “Pipeline” job type\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762490/wiki/okcheuvfts7fmczc1lzf.png\"\u003e\u003c/p\u003e\n\u003cp\u003eConfigure your freestyle job\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762596/wiki/y8a6hducx3kizheoeqov.png\"\u003e\u003c/p\u003e\n\u003cp\u003eOn “Build” tab, write your shell commands to be executed.\nNote: You cannot use commands of plugins you’ve installed, only the programs you’ve installed directly on the server where Jenkins is running.\n\u003cstrong\u003eYou can however “Invoke” the said plugin as a “Build step”\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762838/wiki/t541ooixskhpr6xr6pbg.png\"\u003e\u003c/p\u003e\n\u003cp\u003eOn Jenkins main view, you’ll find your list of jobs.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762908/wiki/tevepvm7fv4ewkdfhxfj.png\"\u003e\u003c/p\u003e\n\u003cp\u003eYou can also preview a build.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654762944/wiki/cpktacrn5nmocouewzza.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"configuring-a-git-repository\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#configuring-a-git-repository\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eConfiguring a \u003ca href=\"/notes/qkp5jc6pta8a9f35evsbvod\"\u003eGit\u003c/a\u003e repository\u003c/h2\u003e\n\u003cp\u003eUnder “Source Code Management” tab\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654763672/wiki/wpg46yorlqlkp1isdzyc.png\"\u003e\u003c/p\u003e\n\u003cp\u003eUse “Jenkins Credentials Provider“ to add credentials\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654763750/wiki/nsidkaihilnbheepedbp.png\"\u003e\u003c/p\u003e\n\u003cp\u003eWhenever you run a job, Jenkins will checkout the code locally for latest commits and then it’ll run the job(test, build) against it.\u003c/p\u003e\n\u003ch2 id=\"docker-in-jenkins\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#docker-in-jenkins\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eDocker in Jenkins\u003c/h2\u003e\n\u003cp\u003eMaking Docker available inside Jenkins\u003c/p\u003e\n\u003cp\u003eAttaching a volume to Jenkins from the host. Currently our Jenkins is running on a server(where Docker commands are available), we can mount Docker runtime directory from the host into the container as a volume.\u003c/p\u003e\n\u003cp\u003eStop and start Jenkins docker container with additional volumes.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edocker stop container-id\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eMove the old Jenkins config to the new container using the existing volume (\u003ccode\u003ejenkins_home\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003edocker run -p 8080:8080 -p 50000:50000 -d \\\n-v jenkins_home:/var/jenkins_home \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\n-v $(which docker):/usr/bin/docker jenkins/jenkins:lts\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edocker exec -it container-id bash\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRun \u003ccode\u003edocker\u003c/code\u003e to check if it’s available\u003c/li\u003e\n\u003cli\u003eHowever, you’ll not be allowed to pull any images, because the Jenkins service user doesn’t have permissions for the docker file(which was mounted from host)\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003els -l /var/run/docker.sock\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eAdd permissions for the Jenkins user by logging in as root user on the container\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edocker exec -u 0 -it container-id bash\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003echmod 666 /var/run/docker.sock\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eOnce done, you’ll be able to use docker commands inside the the Jenkins container while as the Jenkins service user.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs part of our freestyle job, you can add shell commands to make an image out of the generated \u003ccode\u003e.jar\u003c/code\u003e and you can also push it to a docker repository(DockerHub).\u003c/p\u003e\n\u003cp\u003eFor pushing the image to the DockerHub repository, you will need to add credentials to Jenkins.\u003c/p\u003e\n\u003cp\u003eAnd to use the credentials(insecure):\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654765785/wiki/wcul2oihla4vtmu0mido.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654765883/wiki/zwd5847ew0gf4mhffq5v.png\"\u003e\u003c/p\u003e\n\u003cp\u003eTag the image using the repository name.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654765934/wiki/oklywlv24wee6ytbcbvv.png\"\u003e\u003c/p\u003e\n\u003cp\u003eIf you were using a private repository other than DockerHub, you’d have to specify repository host name as an additional parameter for the \u003ccode\u003edocker login\u003c/code\u003e command\u003c/p\u003e\n\u003cp\u003eA more secure way of passing the password is using standard input\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654766232/wiki/ktmvbbujpr4c8hj0h9on.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"push-docker-image-to-nexus-repository\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#push-docker-image-to-nexus-repository\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePush Docker image to \u003ca href=\"/notes/vxce41k3oxe2gxzgenry4lj\"\u003eNexus\u003c/a\u003e repository\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBefore you can do this, you’ll need to register the Nexus repository’s IP and port explicitly by running \u003ccode\u003evim /etc/docker/daemon.conf\u003c/code\u003e on the Nexus host.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"insecure-registries\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"nexus-docker-repo-ip-address:port\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eRestart docker `systemctl restart docker\u003c/li\u003e\n\u003cli\u003eStart Jenkins container\u003c/li\u003e\n\u003cli\u003eAdd the permissions for the Jenkins user to use docker commands(scroll up to “Docker in Jenkins”)\u003c/li\u003e\n\u003cli\u003eCreate credentials for Nexus Docker repository\u003c/li\u003e\n\u003cli\u003ePutting it all together will look something like\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654768504/wiki/yxpknd7sgvmkbysemwjj.png\"\u003e\u003c/p\u003e\n\u003cp\u003eNotice the Nexus \u003ca href=\"/notes/mj7tlpbhhzfpg8pbegkkasb\"\u003eIP Address\u003c/a\u003e and port substituted for repository location/name and for \u003ccode\u003edocker login\u003c/code\u003e the host is mentioned.\u003c/p\u003e\n\u003ch2 id=\"pipeline-jobs\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#pipeline-jobs\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePipeline jobs\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ePipeline jobs are more suited for \u003ca href=\"/notes/eoy9t426lmr0wo5rpxm8g69\"\u003eCI/CD\u003c/a\u003e, you can do scripting - pipeline as code.\u003c/li\u003e\n\u003cli\u003eTo write a new script, go to the “Pipeline” tab after selecting “New item” → “Pipeline job”\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003eA pipeline job is recommended when you want to execute 2 tasks in parallel, or when you need user input if you want to programmatically use conditional statements in your pipeline script or even setting variables.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654774358/wiki/jvj6p0ekwiv96sauhtte.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eScripting is done in \u003ca title=\"Private\" style=\"color: brown\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\"\u003edevlog.groovy (Private)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eGroovy sandbox means you can execute a limited no. of Groovy functions, for which you don’t need approval from a Jenkins admin.\u003c/li\u003e\n\u003cli\u003eInline pipleline scripts are fine for small pipelines but best practice is having the pipeline script in a git repository.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654775265/wiki/fg0pusq07odw4l2etqbw.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThe script should be written inside “Jenkinsfile” as the standard.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"pipeline-syntax\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#pipeline-syntax\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePipeline Syntax\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eScripted\n\u003cul\u003e\n\u003cli\u003eFirst syntax, allows usage of Groovy.\u003c/li\u003e\n\u003cli\u003eAdvanced scripting capabilities, high flexibility.\u003c/li\u003e\n\u003cli\u003eDifficult to start.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eDeclarative\n\u003cul\u003e\n\u003cli\u003eWas added recently, make it easier to get started\u003c/li\u003e\n\u003cli\u003ePredefined structure\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eRequired fields (for declarative )\n\u003cul\u003e\n\u003cli\u003e“pipeline” must be top level\u003c/li\u003e\n\u003cli\u003e“agent” where to execute(relevant for Jenkins cluster)\u003c/li\u003e\n\u003cli\u003e“stages” where the “work” happens\u003c/li\u003e\n\u003cli\u003eYou can have multiple stages within which you will have “steps” which is where the actual commands go.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eRequired field (for scripted)\n\u003cul\u003e\n\u003cli\u003eYou simply need “node”\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAn example script after running will look something like\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654776281/wiki/nawyrptgirflydj5n0ij.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"jenkinsfile-syntax\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#jenkinsfile-syntax\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eJenkinsfile Syntax\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e#!/usr/bin/env groovy\u003c/code\u003e is at the top of the file to let your editor know that you're working with a Groovy script.\nWhenever there is a variable inside a string, it has to use double quotes \u003ccode\u003e\"\"\u003c/code\u003e.\u003c/p\u003e\n\u003ch3 id=\"post-attribute\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#post-attribute\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003epost\u003c/code\u003e attribute\u003c/h3\u003e\n\u003cp\u003eExecutes some logic after all the stages have been executed. It can have conditions with keywords like, \u003ccode\u003ealways\u003c/code\u003e that will run regardless of the outcome of the stages. \u003ccode\u003esuccess\u003c/code\u003e will only run if all the stages have succeeded. \u003ccode\u003efailure\u003c/code\u003e will only run if any of the stages have failed. It basically defines build status or build state changes.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epost \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  always \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    echo \u003cspan class=\"token string gstring\"\u003e\"This will always run\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  success \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    echo \u003cspan class=\"token string gstring\"\u003e\"This will only run if all the stages have succeeded\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  failure \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    echo \u003cspan class=\"token string gstring\"\u003e\"This will only run if any of the stages have failed\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn Jenkinsfile, you can define conditionals for each stage.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Stage 1'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      when \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        expression \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          BRANCH_NAME \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string gstring\"\u003e\"dev\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e BRANCH_NAME \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string gstring\"\u003e\"master\"\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"Will only run if branch is dev or master\"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Stage 2'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"Stage 2\"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"environmental-variables\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#environmental-variables\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eEnvironmental variables\u003c/h3\u003e\n\u003cp\u003eYou can use environmental variables in your Jenkinsfile which Jenkins has provided out of the box such as \u003ccode\u003eBRANCH_NAME\u003c/code\u003e. To find the list of available environmental variables, you can see \u003ccode\u003e/env-vars.html\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eYou can define your own environmental variables in Jenkinsfile. They will be available for all the stages.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  environment \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    NEW_VERSION \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string gstring\"\u003e\"1.0.0\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Build'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"Building new version: \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eNEW_VERSION\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUsing credentials in Jenkinsfile. You will first have to define them in Jenkins GUI and then bind them to the env variable. For which you'll need \"Credentials Binding\" plugin.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  environment \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    SERVER_CREDENTIALS \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecredentials\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'server-credentials'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Deploy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        sh \u003cspan class=\"token string gstring\"\u003e\"\u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eSERVER_CREDENTIALS\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Deploy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"deploying the application\"\u003c/span\u003e\n        \u003cspan class=\"token function\"\u003ewithCredentials\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n          \u003cspan class=\"token function\"\u003eusernamePassword\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecredentials\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'server-credentials'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e usernameVariable\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e USER\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e passwordVariable\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e PWD\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          sh \u003cspan class=\"token string gstring\"\u003e\"echo \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eUSER\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ePWD\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\"\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you need the credentials only for one stage you can use a wrapper and define it inside the stage.\u003c/p\u003e\n\u003ch3 id=\"tools-attribute\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#tools-attribute\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003etools\u003c/code\u003e attribute\u003c/h3\u003e\n\u003cp\u003eBasically provides you build tools for your pipeline to build you project. It has to be preconfigured in Jenkins.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  tools \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    maven \u003cspan class=\"token string\"\u003e'Maven'\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Build'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"Building...\"\u003c/span\u003e\n        sh \u003cspan class=\"token string\"\u003e'mvn install'\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"parameters-attribute\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#parameters-attribute\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003eparameters\u003c/code\u003e attribute\u003c/h3\u003e\n\u003cp\u003eTo parameterize your build.\u003c/p\u003e\n\u003cp\u003eType of parameters:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003estring (name, defaultvalue, description)\u003c/li\u003e\n\u003cli\u003echoice (name, choice, description)\u003c/li\u003e\n\u003cli\u003ebooleanParam (name, defaultvalue, description)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  parameters \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"token comment\"\u003e// string(name: 'VERSION', defaultValue: '', description: 'Version to be deployed on production')\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003echoices\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'VERSION'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e choice\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'1.1.0'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'1.2.0'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e description\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Version to be deployed on production'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003ebooleanParam\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'executeTests'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e defaultValue\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e description\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e''\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'test'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      when \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        expression\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          params\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexecuteTests\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"testing...\"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Deploy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          echo \u003cspan class=\"token string gstring\"\u003e\"Deploying application....\"\u003c/span\u003e\n          echo \u003cspan class=\"token string gstring\"\u003e\"Version number: \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eparams\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eVERSION\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\"\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNext time you run the job, it'll pull the latest changes from the Jenkinsfile and you'll be able to \"Build with Parameters\".\u003c/p\u003e\n\u003cp\u003eYou can use external scripts inside your groovy script. You can also write groovy code inside \u003ccode\u003escript\u003c/code\u003e attribute in your \u003ccode\u003esteps\u003c/code\u003e.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token comment\"\u003e// groovy script\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  echo \u003cspan class=\"token string gstring\"\u003e\"building application\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  echo \u003cspan class=\"token string gstring\"\u003e\"testing application\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003edeploy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  echo \u003cspan class=\"token string gstring\"\u003e\"deploying application\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e gv\n\u003cspan class=\"token comment\"\u003e// making gv global\u003c/span\u003e\npipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  stages \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'init'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        script \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          gv \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e load \u003cspan class=\"token string gstring\"\u003e\"external-script.groovy\"\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stage \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'build'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      script \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        gv\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stage \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'test'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      script \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        gv\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  stage \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'deploy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      script \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        gv\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edeploy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAll environment variables from Jenkinsfile are available in the groovy script.\u003c/p\u003e\n\u003ch3 id=\"input-parameters-in-jenkinsfile\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#input-parameters-in-jenkinsfile\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eInput Parameters in Jenkinsfile\u003c/h3\u003e\n\u003cp\u003eUser can input values for the parameters while running the job.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003epipeline \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  stages\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Deploy'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      input \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        message\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string gstring\"\u003e\"Select the environment to deploy to\"\u003c/span\u003e\n        ok \u003cspan class=\"token string gstring\"\u003e\"Done\"\u003c/span\u003e\n        parameters \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token function\"\u003echoices\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'ENV'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e choice\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'dev'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'staging'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'production'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e description\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Version to be deployed on production'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e// this is a scoped parameter, it is not global\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e// you can also use script block but the syntax for input differs\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      steps \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"Deploying application....\"\u003c/span\u003e\n        echo \u003cspan class=\"token string gstring\"\u003e\"Deploying to \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eENV\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\"\u003c/span\u003e\n        script \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          env\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eENV \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e input message\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string gstring\"\u003e\"Select environment to deploy to\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ok\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string gstring\"\u003e\"Done\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e parameters\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token function\"\u003echoices\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'ENV'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e choice\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'dev'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'staging'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'production'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e description\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Version to be deployed on production'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"multibranch-pipeline\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#multibranch-pipeline\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eMultibranch Pipeline\u003c/h3\u003e\n\u003cp\u003eSingle branch pipeline would look something like:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654854298/wiki/nsj9vutzvbdblniztxus.png\"\u003e\u003c/p\u003e\n\u003cp\u003eTypically, you’ll run tests on all the branches but you’d execute deployment only on Master branch. Other branches are merged into the Master branch and then the build, deploy jobs are triggered.\u003c/p\u003e\n\u003cp\u003eWhy do you need pipelines for all the branches? So that we can run tests to see everything is working properly on non-Master branches before merge.\nWe also need different behaviour based on branch. For example: “If branch is master, run test, build and deploy” and “if branch isn’t master, run test and build skip deploy” etc.\u003c/p\u003e\n\u003cp\u003ePipelines need to be created dynamically in a Multibranch Pipeline.\u003c/p\u003e\n\u003cp\u003eSelect “Multibranch Pipeline” from the “New Item” page\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654854883/wiki/qbxeuoaytkq6wprkwais.png\"\u003e\u003c/p\u003e\n\u003cp\u003eHere, we can use regular expression to filter what branches to include. In this jobs, we’re choosing all the branches on the given repository. The rest of the build configuration will be made in the Jenkinsfile.\u003c/p\u003e\n\u003ch2 id=\"jenkins-credentials\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#jenkins-credentials\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eJenkins credentials\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1654858019/wiki/s6tnlznggh5akynpvajl.png\"\u003e\u003c/p\u003e\n\u003cp\u003eThe credentials feature is thanks to a plugin. There are different credentials plugins that add more options(kinds of credentials).\u003c/p\u003e\n\u003cp\u003eThere are three scopes for credentials, System and Global credentials can be added on “Manage Credentials” view and Project specific credentials can be added from inside the job. System wide credentials will not be accessible inside the project.\u003c/p\u003e\n\u003ch2 id=\"jenkins-shared-library\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#jenkins-shared-library\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eJenkins Shared Library\u003c/h2\u003e\n\u003cp\u003eLets say we're working with a lot of micro services that contribute to one whole application. In Jenkins we'd use multi branch pipelines for each of that microservice. We'd build each of the microservice as a separate application; meaning you'd have multiple projects with multiple Jenkinsfiles for building those pipelines. Most of the logic in the Jenkinsfile would be same for all the applications in this case. Building \u003ccode\u003e.jar\u003c/code\u003e, building Docker images, pushing to Nexus repository...all these steps will be same for all the applications. To keep this aligned with DRY and to make this process efficient we use \u003cstrong\u003eJenkins Shared Library\u003c/strong\u003e.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eIt is an extension to Pipelines.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIt is it's own repository written in Groovy(just like Jenkinsfile).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWe can write all the logic that is going to be shared across many different applications in a Shared Library and reference that logic in the Jenkinsfile in each project. (Basically, function calls in the Jenkinsfile).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIt can also be used with different projects(with different teams).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIf not all the steps are same in the Jenkinsfile across those different projects, whatever logic is common among those projects can be referenced from Shared Library instead of repeating the logic across multiple Jenkinsfile. E.g.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCompany wide Nexus repository.\u003c/li\u003e\n\u003cli\u003eCompany wide slack channel.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"create-a-shared-library\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#create-a-shared-library\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eCreate a Shared Library\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eInit a git repository.\u003c/li\u003e\n\u003cli\u003eCreate a Groovy project in Maven and write the functions.\u003c/li\u003e\n\u003cli\u003eMake the Shared Library available throughout Jenkins/or specific pipeline.\u003c/li\u003e\n\u003cli\u003eUse the Shared Library in Jenkinsfile to extend the Pipeline.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"structure-of-shared-library\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#structure-of-shared-library\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eStructure of Shared Library\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eCreate a Groovy project in Maven.\u003c/li\u003e\n\u003cli\u003eMain folder \u003ccode\u003evars\u003c/code\u003e contains all the functions that we're going to call from a Jenkinsfile.\u003c/li\u003e\n\u003cli\u003eEach function/execution step will be in its own Groovy script(inside \u003ccode\u003evars\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esrc\u003c/code\u003e folder contains helper logic(utility code etc).\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eresources\u003c/code\u003e folder is where you'll keep your non-Groovy code(SQL scripts, external libraries, Powershell scripts, JSON files etc).\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// vars/buildJar.groovy; functions(execution steps) are referenced by their filename\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ecall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// here is where the logic goes\u003c/span\u003e\n  echo \u003cspan class=\"token string gstring\"\u003e\"Building the application\"\u003c/span\u003e\n  sh \u003cspan class=\"token string gstring\"\u003e\"mvn package\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eCommit and push the code the git repository.\u003c/li\u003e\n\u003cli\u003eMake shared library available globally.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"https://res.cloudinary.com/zubayr/image/upload/v1658158197/wiki/h0ffz078kfggwfsddytc.png\"\u003e\u003c/p\u003e\n\u003cp\u003eDefault version can either be a branch name, a commit hash or a tag. Having a fixed version is a good idea(to avoid breaking changes stopping a pipeline).\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTo use Shared Library in your Jenkinsfile:\n\u003cul\u003e\n\u003cli\u003eYou'll need to import the Library in your Jenkinsfile.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e@Library(\"jenkins-shared-library\")_\u003c/code\u003e you'll need to add an underscore at the end of the \u003ccode\u003e@Library\u003c/code\u003e call if you don't have any variable/function definitions/calls and have \u003ccode\u003epipeline{}\u003c/code\u003e directly after.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\u003cspan class=\"token annotation punctuation\"\u003e@Library\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string gstring\"\u003e\"jenkins-shared-library\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// defined in Global Pipeline Libraries\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e gv\n\npipeline\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  agent any\n  tools\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    maven \u003cspan class=\"token string\"\u003e'Maven'\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  stages\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string gstring\"\u003e\"init\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string gstring\"\u003e\"build jar\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        script\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"token function\"\u003ebuildJar\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003estage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string gstring\"\u003e\"build images\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      steps\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        script\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"token function\"\u003ebuildImage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eCommit/push the changes to remote repo of the Jenkinsfile.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"passing-parameters-to-methods\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#passing-parameters-to-methods\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003ePassing Parameters to Methods\u003c/h3\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ecall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eString imageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  sh \u003cspan class=\"token string gstring\"\u003e\"docker build -t \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003eimageName\u003c/span\u003e .\"\u003c/span\u003e\n  sh \u003cspan class=\"token string gstring\"\u003e\"docker push \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003eimageName\u003c/span\u003e\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe can access global variables. We've all the environmental variables available in the Jenkinsfile also available in the Shared Library.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eTo extract logic into Groovy classes\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003eWe can add a function's logic to a standalone file inside the \u003ccode\u003esrc\u003c/code\u003e folder inside a class in a \u003ccode\u003epackage\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHowever, unlike the Shared Library, we do NOT have access to the global/environmental variables when we use separate classes. To make pipeline syntax available we use \u003ccode\u003escript\u003c/code\u003e keyword as parameter to the class's function.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token comment\"\u003e// Docker.groovy\u003c/span\u003e\n\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003epackage\u003c/span\u003e com\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexample\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDocker\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eimplements\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// `implements Serializable` to support saving the state of the execution if the pipeline is paused and then resumed.\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e script\n\n  \u003cspan class=\"token function\"\u003eDocker\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003escript\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003escript \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e script\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ebuildDockerImage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eString imageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        script\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eecho \u003cspan class=\"token string gstring\"\u003e\"building the docker image...\"\u003c/span\u003e\n        script\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esh \u003cspan class=\"token string gstring\"\u003e\"docker build -t \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003eimageName\u003c/span\u003e .\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003edockerLogin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        script\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ewithCredentials\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003escript\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eusernamePassword\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecredentialsId\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'docker-hub-repo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e passwordVariable\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'PASS'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e usernameVariable\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'USER'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            script\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esh \u003cspan class=\"token string gstring\"\u003e\"echo \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003escript\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePASS\u003c/span\u003e | docker login -u \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003escript\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eUSER\u003c/span\u003e --password-stdin\"\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003edockerPush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eString imageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        script\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esh \u003cspan class=\"token string gstring\"\u003e\"docker push \u003cspan class=\"token expression\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003eimageName\u003c/span\u003e\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo call this function inside the \u003ccode\u003evars\u003c/code\u003e's groovy scripts\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eNote\u003c/strong\u003e: You can actually just call these class function directly to your Jenkinsfile instead of calling it in \u003ccode\u003evars\u003c/code\u003e folder. But it is a best practice to call them in \u003ccode\u003evars\u003c/code\u003e folder as an interface.\u003c/p\u003e\n\u003cp\u003eThese are just making calls to different function in a single class.\u003c/p\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token comment\"\u003e// buildImage.groovy\u003c/span\u003e\n\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e com\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexample\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eDocker\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e call \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eString imageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// passing context from this function to the Docker class using `this` keyword\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDocker\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebuildDockerImage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token comment\"\u003e// dockerLogin.groovy\u003c/span\u003e\n\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e com\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexample\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eDocker\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ecall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDocker\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edockerLogin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-groovy\"\u003e\u003ccode class=\"language-groovy\"\u003e\u003cspan class=\"token comment\"\u003e// dockerPush.groovy\u003c/span\u003e\n\u003cspan class=\"token shebang comment\"\u003e#!/usr/bin/env groovy\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e com\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexample\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eDocker\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ecall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eString imageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDocker\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edockerPush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eimageName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYou will call these function in your \u003ccode\u003eJenkinsfile\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAn alternative to having a Globally imported Shared Library, we can reference the library directly in the Jenkinsfile.\u003c/p\u003e\n\u003cp\u003eInstead of using \u003ccode\u003e@Library(jenkins-shared-library@master)...\u003c/code\u003e use:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003elibrary identifier: 'jenkins-shared-library@master', retriever: modernSCM(\n    [$class: 'GitSCMSource',\n    remote: 'https://gitlab.com/user/shared-library.git',\n    credentialsID: 'gitlab-credentials'\n    ]\n  )\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"webhooks\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#webhooks\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eWebhooks\u003c/h2\u003e\n\u003ch2 id=\"code-source\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#code-source\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eCode source\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://gitlab.com/nanuchi/jenkins-shared-library\"\u003enanuchi/jenkins-shared-library · GitLab\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/522ww47pqvt6y0yj8zparmy\"\u003eDevOps\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/ajojjq9tu40v2rnmzktfyeo\"\u003eAWS CodeBuild\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/uu932tw90r0gvvg8maqr3s1\"\u003eAWS IAM\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/5151o31s5jmalwws5joksse\"\u003eDevOps Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/rslamxyhwny92aooavg497t\"\u003eJenkins with-on AWS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/qcaw5ht4vcnucydq104gh7v\"\u003eBuild Automation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/5eybx5vd339tjnkglx8igde\"\u003eDevops Interview Questions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/vxce41k3oxe2gxzgenry4lj\"\u003eNexus\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"3nfl4nvv516muyzozhcwrw8","title":"/root","desc":"","updated":1655559901157,"created":1637610830605,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"581715455a6f0f7a699209e8521b4acf","links":[{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"archive.about","alias":"my","position":{"start":{"line":4,"column":9,"offset":37},"end":{"line":4,"column":29,"offset":57},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"archive.about"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"tags.areas","alias":"#areas","position":{"start":{"line":20,"column":111,"offset":1051},"end":{"line":20,"column":117,"offset":1057},"indent":[]},"xvault":false,"to":{"fname":"tags.areas"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"tags.areas","alias":"#areas","position":{"start":{"line":21,"column":3,"offset":1198},"end":{"line":21,"column":9,"offset":1204},"indent":[]},"xvault":false,"to":{"fname":"tags.areas"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes","alias":"swipes","position":{"start":{"line":27,"column":3,"offset":1724},"end":{"line":27,"column":13,"offset":1734},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.quotes","alias":"quotes","position":{"start":{"line":27,"column":48,"offset":1769},"end":{"line":27,"column":72,"offset":1793},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.quotes"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.excerpts","alias":"excerpts","position":{"start":{"line":27,"column":74,"offset":1795},"end":{"line":27,"column":102,"offset":1823},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.excerpts"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.sayings","alias":"sayings","position":{"start":{"line":27,"column":104,"offset":1825},"end":{"line":27,"column":130,"offset":1851},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.sayings"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.phrases","alias":"phrases","position":{"start":{"line":27,"column":132,"offset":1853},"end":{"line":27,"column":158,"offset":1879},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.phrases"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"resources.people","alias":"others","position":{"start":{"line":27,"column":214,"offset":1935},"end":{"line":27,"column":241,"offset":1962},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"resources.people"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"inbox.webmark","alias":"webmark","position":{"start":{"line":31,"column":235,"offset":2463},"end":{"line":31,"column":260,"offset":2488},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"inbox.webmark"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"slipbox.Ontology","alias":"slipbox.Ontology","position":{"start":{"line":55,"column":3,"offset":3735},"end":{"line":55,"column":23,"offset":3755},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"slipbox.Ontology"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"archive.about","alias":"About me","position":{"start":{"line":60,"column":3,"offset":3963},"end":{"line":60,"column":29,"offset":3989},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"archive.about"}}],"anchors":{"welcome-to-noetic-noggin":{"type":"header","text":"Welcome to Noetic Noggin","value":"welcome-to-noetic-noggin","line":8,"column":0,"depth":1},"principles":{"type":"header","text":"Principles","value":"principles","line":18,"column":0,"depth":2},"all-notes-should-be-relative-to-me":{"type":"header","text":"All notes should be relative to me.","value":"all-notes-should-be-relative-to-me","line":20,"column":0,"depth":3},"gotta-capture-em-all":{"type":"header","text":"Gotta capture 'em all","value":"gotta-capture-em-all","line":30,"column":0,"depth":3},"dont-force-evolution":{"type":"header","text":"Don't force evolution","value":"dont-force-evolution","line":40,"column":0,"depth":3},"noise--signal":{"type":"header","text":"Noise \u0026 Signal","value":"noise--signal","line":45,"column":0,"depth":3},"why-do-any-of-this":{"type":"header","text":"Why do any of this?","value":"why-do-any-of-this","line":50,"column":0,"depth":3},"structure-of-this-wiki":{"type":"header","text":"Structure of this wiki","value":"structure-of-this-wiki","line":59,"column":0,"depth":2},"quicklinks":{"type":"header","text":"Quicklinks","value":"quicklinks","line":64,"column":0,"depth":2}},"children":["0yay2om15bsg2li2p6qgux7","05c4nnjqa92zx11ld6o0ytn","9gtn7g40cvqui0sifl1s7t5","ftbd1hknsd3ocd7jao26tn3","a1kmkdbpclaz5p6sykaw6kc","z121gkmqfo09m8r7jgnpfgn","gkqrr7xbt18xhi93dmjrwzj","ja2x4lrgejr9o9wvit0bd0d","luv39odkfibx3wdosvigwvy","vtvk3bi6o72w58oima9xzf3","yy652kvqrkfn9ipk07m40h4"],"parent":null,"data":{},"body":"\n# Welcome to Noetic Noggin\n\nThis is [[my|archive.about]] personal wiki and a commonplace book; notes by me, for me.\n\n🚧 Permanently under construction 🚧\n\n![](https://res.cloudinary.com/zubayr/image/upload/v1658499909/wiki/ajevkuyebljlxiblyst2.png)\n\nThis wiki was made possible with [dendron.so](https://dendron.so) and [obisidian.md](https://obsidian.md). Stored on [Github Repository](https://github.com/zubayrrr/dendron) and hosted on [Netlify](https://netlify.com) for free.\n\n## Principles\n\n### All notes should be relative to me.\n\n- All notes in principle are written for me; what I know about a subject, how I feel about a particular thing.\n- Opinions are fine as long as I feel strong epistemic confidence in the given opinion.\n- Don't over explain a note if it's not necessary, remember, these notes are for you and are relative to whatever knowledge you posses about the subject.\n- Read books and make an dedicated notes for them.\n- Listen podcasts but capture them inside a \"subject specific\" note or \"Map of Concept\" note or a note tagged #areas. Because making notes from podcasts can be tedious as they're not as well structured as books for consumption.(Whose merit is debatable.)\n- #areas are basically \"Map of Concept\" notes but I have recently come to the realization that its better to maintain them [Nikita Voloboev style](https://wiki.nikiv.dev/) but with heavy usage of transclusion and backlinking.\n  - \"Resources\" should be first processed and then mentioned inside the note, otherwise they should be left in inbox.\n\n### Gotta capture 'em all\n\n- Hog whatever information tickles your pickle([anything that gratifies one's intellectual curiosity](https://news.ycombinator.com/newsguidelines.html)).\n- [[swipes]] are interesting/useful bits of... [[quotes|swipes.quotes]], [[excerpts|swipes.excerpts]], [[sayings|swipes.sayings]], [[phrases|swipes.phrases]]. Essentially, ideas, opinions that are swiped off from [[others|resources.people]].\n- Make no distinction between \"your\" ideas and ideas of \"others\", because if you vibe with an idea; it's already yours.\n- But also remember \"If you've time to consume, you've time to produce.\".\n- Use [raindrop.io](https://raindrop.io) to manage your URL bookmarks.\n- If you need to bookmark a webpage or an article all together, use [MarkDownload](https://chrome.google.com/webstore/detail/markdownload-markdown-web/pcmpcfapbekmbjjkdalcgopdkipoggdi?hl=en-GB) to rip the entire page. Let's call it a [[webmark|inbox.webmark]]; it belong in the `/inbox`.\n- Similar process is employed for capturing tweets using [tweet-to-markdown](https://github.com/kbravh/tweet-to-markdown) and it also belongs in the `/inbox`.\n\n### Don't force evolution\n\n- Let your second brain evolve at it's own pace.\n- The structure should never be _too_ rigid because its meant to take form by itself.\n\n### Noise \u0026 Signal\n\n- While capturing ideas left and right is recommended, make sure you're not harming your periods of focus.\n- Have impenetrable focus periods (use Pomodoro method) where you only care about the work on hand and nothing else.\n\n### Why do any of this?\n\n- Because I can't remember everything - there's a lot of information around that interests me and there isn't enough working memory installed in me.\n- So, I make notes - to remember, to create, to meditate, to think.\n- A bodybuilder's portfolio is their body - my portfolio is my wiki.\n- Not only am I making - whatever I know - tangible by writing it down. I know exactly where to look if I ever forget something.\n- I am at the beginning of my learning adventures. When I look back at it, I will know where I came from and how my thoughts evolved over time.\n- Plus, its really fun to nerd out.\n\n## Structure of this wiki\n\n- [[slipbox.Ontology]] explains the structure of this wiki and the tags, backlinks used in it.\n- Dendron takes care of the structure and hierarchy(mostly), but I insist on using tags for backwards compatibility.\n\n## Quicklinks\n\n- [[About me|archive.about]]\n- [Github](https://github.com/zubayrrr)\n- [Twitter](https://twitter.com/zoobhalu)\n- [Blog](https://zubayrali.in)\n- [Guestbook](https://www.yourworldoftext.com/~zubayrali/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template","insertNote":{"initialValue":"templates"}},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableHandlebarTemplates":true,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":true},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"theme":"dark","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Noetic Noggin","description":"Personal Wiki / Digital Garden","author":"Zubayr Ali","twitter":"zoobhalu"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"siteUrl":"localhost:3000","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"jqsu891tokqfup82wkq6j02"},"buildId":"4oDSInv8WeDX6cVSprjyl","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>