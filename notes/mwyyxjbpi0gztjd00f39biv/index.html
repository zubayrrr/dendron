<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Ansible</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Wiki / Digital Garden"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="zoobhalu"/><meta name="twitter:creator" content="zoobhalu"/><meta property="og:title" content="Ansible"/><meta property="og:description" content="Personal Wiki / Digital Garden"/><meta property="og:url" content="localhost:3000/notes/mwyyxjbpi0gztjd00f39biv/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="5/24/2022"/><meta property="article:modified_time" content="6/2/2022"/><link rel="canonical" href="localhost:3000/notes/mwyyxjbpi0gztjd00f39biv/"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/cc2307f6fd3a2fec.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cc2307f6fd3a2fec.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-709abf7ab5f510de.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-c4b0e551a2150d17.js" defer=""></script><script src="/_next/static/chunks/pages/_app-62c5b93605efada7.js" defer=""></script><script src="/_next/static/chunks/78-13ae6acd5ce7ca5b.js" defer=""></script><script src="/_next/static/chunks/373-2f3879190a46a3d9.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-69449972c2a725d8.js" defer=""></script><script src="/_next/static/4oDSInv8WeDX6cVSprjyl/_buildManifest.js" defer=""></script><script src="/_next/static/4oDSInv8WeDX6cVSprjyl/_ssgManifest.js" defer=""></script><script src="/_next/static/4oDSInv8WeDX6cVSprjyl/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="ansible"><a aria-hidden="true" class="anchor-heading" href="#ansible"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ansible</h1>
<ul>
<li>Areas: <a href="/notes/522ww47pqvt6y0yj8zparmy">DevOps</a></li>
<li>Related: <a href="/notes/zbj9fmibk0nj56jkxz7jpzg">Puppet</a>, <a href="/notes/306gnfs0uii610vyobkxknb">Chef</a></li>
</ul>
<hr>
<ul>
<li>Ansible is a configuration management system used to configure, automate,monitor, and troubleshoot devices in large networks.</li>
<li>It is written in <a href="/notes/wa4wthnhw54hd5wfyocyvqa">Python</a> and is open source under GPL License.</li>
<li>There is a control node and many managed nodes (network devices we manage with Ansible). Windows OS is not supported as a control node at this moment (only <a title="Private" style="color: brown" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank">devlog.WSL (Private)</a>);</li>
<li>Ansible uses an agentless architecture. No application is installed on the managed nodes and no daemon, process or agent is running;</li>
<li>Ansible uses for device configuration. Any system that can be configured using <a href="/notes/o922t6d9q6wur3yve290hir">SSH</a> can also be configured using Ansible;</li>
<li>When managing Windows it users native PowerShell remote support instead of SSH;</li>
<li>It is also known as an orchestration engine, used in large networks with many devices that need to be configured, maintained and troubleshooted in an automated way.</li>
<li>Ansible uses Modules which are scripts or units of work that do the actual job.</li>
<li>Theres no process that runs continuously on neither the controlling machine or the managed machine(s)</li>
<li>The controlling node doesn't have be a privileged user, it can simply ssh into the managed node.</li>
</ul>
<h2 id="ansible-components"><a aria-hidden="true" class="anchor-heading" href="#ansible-components"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ansible Components</h2>
<ul>
<li>Inventory is a list of managed nodes. An inventory file is also sometimes called a "host file". The inventory can specify information such as IP address, hostname or domain-name for each managed node. Default location: <code>/etc/ansible/hosts</code> (or use the <code>-i</code> flag to use a custom file). An inventory file can be formatted as an INI or YAML file.</li>
<li>Modules are the units of code ansible executes. Each module has a particular use, from administering users on a specific type of database to managing VLAN interfaces on a specific type of network device or to installing, configuring and starting a specific server like for example Apache2 on a Linux distribution.</li>
<li>Tasks are units of action in Ansible. You can execute a single task once with an Ad-Hoc command or multiple tasks in a playbook.</li>
<li>Playbooks are ordered lists of tasks. We can run those tasks in that order repeatedly.</li>
<li>Playbooks are written in YAML and are easy to read, write, share and understand.</li>
</ul>
<h2 id="inventory-file"><a aria-hidden="true" class="anchor-heading" href="#inventory-file"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Inventory File</h2>
<p>Within the inventory file, we can organize our server into different groups, this will help us keep the host in order and permit us to use group variables. A host can be part of multiple groups.</p>
<pre class="language-ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">servers</span><span class="token punctuation">]</span></span>

<span class="token key attr-name">vps1 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">207.154.254.221</span>
<span class="token key attr-name">vps2 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">167.122.186.63</span>
<span class="token key attr-name">vps3 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">139.59.155.232</span>
</code></pre>
<ul>
<li><code>ansible_host</code> is a predefined variable that holds the value of the managed hosts.</li>
<li>To parse the inventory file and list all the hosts defined in the inventory file:
<ul>
<li><code>ansible -i ./hosts --list-hosts all</code></li>
</ul>
</li>
<li>To check if ansible is able to communicate with the hosts
<ul>
<li><code>ansible -i ./hosts vps1 -m ping -u userName -k</code> (to test for the whole group, use the group name such as: <code>servers</code> instead of <code>vps1</code>)</li>
<li><code>-m</code> is for "module" in this case we're using the <code>ping</code> module - it checks the ssh authentication for the each node.</li>
<li><code>-u</code> defines the username that will connect to the remote hosts.</li>
<li><code>-k</code> to prompt for password.
<ul>
<li><code>sshpass</code> module must be installed on the controlling machine</li>
<li>Edit <code>/etc/ansible/ansible.cfg</code> to uncomment <code>host_key_checking = False</code></li>
<li>If you want to test ssh communication for all the hosts in the inventory file, use option "all" instead of a group or a specific host</li>
</ul>
</li>
</ul>
</li>
<li>To get setup info
<ul>
<li><code>ansible -i ./hosts servers -m setup -u student -k</code></li>
</ul>
</li>
<li>To setup ssh authentication</li>
<li>You can omit the <code>-u</code> and <code>-k</code> option you can declare them in the inventory file.</li>
</ul>
<pre class="language-ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">servers</span><span class="token punctuation">]</span></span>

<span class="token key attr-name">vps1 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">207.154.254.221</span>
<span class="token key attr-name">vps2 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">167.122.186.63</span>
<span class="token key attr-name">vps3 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">139.59.155.232</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">servers:vars</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">ansible_user</span><span class="token punctuation">=</span><span class="token value attr-value">student</span>
<span class="token key attr-name">ansible_ssh_pass</span><span class="token punctuation">=</span><span class="token value attr-value">clearPW123</span>
<span class="token key attr-name">ansible_become_pass</span><span class="token punctuation">=</span><span class="token value attr-value">sudoPWroot</span>
<span class="token key attr-name">ansible_port</span><span class="token punctuation">=</span><span class="token value attr-value">22</span>
</code></pre>
<ul>
<li>You should use a vault to securely pass your credentials instead of hardcoding it.</li>
<li>To overwrite variables for a specific host, such as using a different user to authenticate</li>
</ul>
<pre class="language-ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">servers</span><span class="token punctuation">]</span></span>

<span class="token key attr-name">vps1 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">207.154.254.221 ansible_user=student2</span>
<span class="token key attr-name">vps2 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">167.122.186.63</span>
<span class="token key attr-name">vps3 ansible_host</span><span class="token punctuation">=</span><span class="token value attr-value">139.59.155.232</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">servers:vars</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">ansible_user</span><span class="token punctuation">=</span><span class="token value attr-value">student</span>
<span class="token key attr-name">ansible_ssh_pass</span><span class="token punctuation">=</span><span class="token value attr-value">clearPW123</span>
<span class="token key attr-name">ansible_port</span><span class="token punctuation">=</span><span class="token value attr-value">22</span>
</code></pre>
<h2 id="ad-hoc-commands-vs-playbooks"><a aria-hidden="true" class="anchor-heading" href="#ad-hoc-commands-vs-playbooks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ad-Hoc Commands VS Playbooks</h2>
<ul>
<li>Ad-Hoc commands can be used to do quick and simple things like checking the logs, checking if a process is running, or installing a package on a list of servers.</li>
<li>Playbooks are used for big deployments, orchestration or system configuration. We use the <code>ansible</code> command to run an Ad-Hoc command and the <code>ansible-playbook</code> command to run a playbook.</li>
<li><code>ansible</code> is used to run Ad-Hoc commands. These commands are quick and easy but are not reusable. You don't save them for later, they demonstrate the simplicity and power of ansible.
<ul>
<li>Some examples are rebooting servers, updating servers, copy files, manage package, users.</li>
</ul>
</li>
<li>Playbooks are scripts written in <a title="Private" style="color: brown" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank">devlog.YAML (Private)</a> and are composed of one or more play in an ordered list and each play executes one or more tasks using ansible modules.</li>
<li>Both Ad-Hoc commands and Playbooks use modules to perform different tasks. Modules are units of code that do the actual work in Ansible.</li>
</ul>
<h2 id="ad-hoc-commands"><a aria-hidden="true" class="anchor-heading" href="#ad-hoc-commands"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ad-Hoc Commands</h2>
<h3 id="the-shell-module"><a aria-hidden="true" class="anchor-heading" href="#the-shell-module"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The Shell Module</h3>
<p>The general syntax of running an Ad-Hoc command is:</p>
<p><code>ansible -i [path-to-invetory-file] [group-to-connect-to] -m [module] -a [module-arguments] -u [user] -k</code>
<code>ansible -i ./hosts servers -m shell -a "df -h" -u user1 -k</code></p>
<p>By default ansible uses multi-threading, with 5 threads as the default. If you've more than 5 hosts, you can increase the threads using the <code>-f</code> option.</p>
<p>Example:</p>
<p><code>ansible -i ./hosts servers -m shell -a "ip address show dev eth0 | grep ether | cut -d ' ' -f6 | grep -v ">>"</code></p>
<h3 id="the-script-module"><a aria-hidden="true" class="anchor-heading" href="#the-script-module"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The Script Module</h3>
<ul>
<li>This module can be used to run a local shell script on a remote system.</li>
<li>The classical method of doing something like this would be to first copy the script to the remote machines using <a href="/notes/wosij89dfykieaipt38kees">scp</a>, connect to it and run the script.</li>
<li>Using the script module, the controlling machine's script is run on each host(in fact the local script is transferred to remote node and then executed).</li>
<li>This module is also supported for Windows targets.</li>
</ul>
<p>Example:</p>
<p><code>ansible -i ./hosts servers -m scripts -a "./backsup.sh" --become -K</code></p>
<p><code>--become</code> to run the script as <a title="Private" style="color: brown" href="https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html" target="_blank">devlog.root (Private)</a> on the host machines
<code>-K</code> to prompt for <a href="/notes/jqyxvlopjrxj27o648plyk9">sudo</a> password (you can omit this if you've already declared it inside the inventory file)</p>
<h3 id="the-apt-module"><a aria-hidden="true" class="anchor-heading" href="#the-apt-module"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The APT Module</h3>
<ul>
<li>This module automates software installation, removal and update.</li>
<li>It allows you to manage packages on Ubuntu(Debian) Distributions.</li>
<li>If you use other distros, use the corresponding package managers.</li>
</ul>
<p>Example:</p>
<p>Install a specific software on all the hosts.</p>
<p>The <code>state</code> option indicates the desired state of a package.</p>
<p><code>ansible -i ./hosts severs -m apt -a "name=nmap state=present update_cache=true" -u [user] -k --become -K</code></p>
<ul>
<li>Remove a specific software on all the hosts.</li>
</ul>
<p><code>ansible -i ./hosts severs -m apt -a "name=nmap state=absent purge=yes update_cache=true" --become</code></p>
<ul>
<li>To perform a full system update on all the hosts.</li>
</ul>
<p><code>ansible -i ./hosts servers -m apt "upgrade=full" --become</code></p>
<ul>
<li>To remove dependencies that are no longer required.</li>
</ul>
<p><code>ansible -i ./hosts servers -m apt "autoremove=yes autoclean=yes" --become</code></p>
<h3 id="the-service-module"><a aria-hidden="true" class="anchor-heading" href="#the-service-module"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The Service Module</h3>
<p>This module is used to control the services running on the host nodes.</p>
<p>Examples:</p>
<ul>
<li>To start a service on all the hosts.</li>
</ul>
<p><code>ansible -i ./hosts servers -m service -a "name=ngnix state=started" --become</code></p>
<ul>
<li>To reload a service on all the hosts.</li>
</ul>
<p><code>ansible -i ./hosts servers -m service -a "name=ngnix state=restarted" --become</code></p>
<ul>
<li>To stop a service on all the hosts.</li>
</ul>
<p><code>ansible -i ./hosts servers -m service -a "name=ngnix state=stopped" --become</code></p>
<ul>
<li>Set a service to start on boot on all the hosts.</li>
</ul>
<p><code>ansible -i ./hosts servers -m service -a "name=ngnix enabled=yes" --become</code></p>
<h3 id="the-user--group-module"><a aria-hidden="true" class="anchor-heading" href="#the-user--group-module"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The User &#x26; Group Module</h3>
<ul>
<li>This module is used to manage groups, user accounts and user attributes.</li>
</ul>
<p>Examples:</p>
<ul>
<li>Creating a new group on all remote hosts</li>
</ul>
<p><code>ansible -i ./hosts servers -m group -a "name=developers state=present" --become</code></p>
<ul>
<li>Removing an existing group from all remote hosts</li>
</ul>
<p><code>ansible -i ./hosts servers -m group -a "name=developers state=absent" --become</code></p>
<ul>
<li>Adding a new user to all remote hosts
<ul>
<li>You can give comma separated values if you want to add the user to multiple groups</li>
<li>The last three options are optional
<code>ansible -i ./hosts servers -m user -a "name=johndoe state=present groups=developers create_home=yes comment=\"new user\" shell=/bin/bash generate_ssh_key=yes ssh_key_bits=2048" --become</code></li>
</ul>
</li>
</ul>
<h2 id="resources"><a aria-hidden="true" class="anchor-heading" href="#resources"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Resources</h2>
<ul>
<li><a href="https://github.com/geerlingguy/ansible-for-devops">geerlingguy/ansible-for-devops: Ansible for DevOps examples.</a></li>
</ul>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/522ww47pqvt6y0yj8zparmy">DevOps</a></li>
<li><a href="/notes/mkwoo3ek4y6bnddpy1iteb9">Terraform</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ansible-components" title="Ansible Components">Ansible Components</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#inventory-file" title="Inventory File">Inventory File</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ad-hoc-commands-vs-playbooks" title="Ad-Hoc Commands VS Playbooks">Ad-Hoc Commands VS Playbooks</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ad-hoc-commands" title="Ad-Hoc Commands">Ad-Hoc Commands</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-shell-module" title="The Shell Module">The Shell Module</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-script-module" title="The Script Module">The Script Module</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-apt-module" title="The APT Module">The APT Module</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-service-module" title="The Service Module">The Service Module</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#the-user--group-module" title="The User &amp; Group Module">The User &amp; Group Module</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#resources" title="Resources">Resources</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"mwyyxjbpi0gztjd00f39biv","title":"Ansible","desc":"","updated":1654195568346,"created":1653430100223,"custom":{},"fname":"devlog.ansible","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"b1d124f94bf3b2cc227ca2f6dd4e5b14","links":[{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"areas.devops","alias":"areas.devops","position":{"start":{"line":2,"column":10,"offset":10},"end":{"line":2,"column":26,"offset":26},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"areas.devops"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.puppet","alias":"devlog.puppet","position":{"start":{"line":3,"column":12,"offset":38},"end":{"line":3,"column":29,"offset":55},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.puppet"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.chef","alias":"devlog.chef","position":{"start":{"line":3,"column":31,"offset":57},"end":{"line":3,"column":46,"offset":72},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.chef"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.python","alias":"devlog.python","position":{"start":{"line":8,"column":20,"offset":226},"end":{"line":8,"column":37,"offset":243},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.python"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.WSL","alias":"devlog.WSL","position":{"start":{"line":9,"column":159,"offset":440},"end":{"line":9,"column":173,"offset":454},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.WSL"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.SSH","alias":"devlog.SSH","position":{"start":{"line":11,"column":82,"offset":673},"end":{"line":11,"column":96,"offset":687},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.SSH"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.YAML","alias":"devlog.YAML","position":{"start":{"line":90,"column":36,"offset":5041},"end":{"line":90,"column":51,"offset":5056},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.YAML"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.scp","alias":"devlog.scp","position":{"start":{"line":111,"column":116,"offset":6069},"end":{"line":111,"column":130,"offset":6083},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.scp"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.root","alias":"devlog.root","position":{"start":{"line":119,"column":33,"offset":6441},"end":{"line":119,"column":48,"offset":6456},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.root"}},{"type":"wiki","from":{"fname":"devlog.ansible","id":"mwyyxjbpi0gztjd00f39biv","vaultName":"Dendron"},"value":"devlog.sudo","alias":"devlog.sudo","position":{"start":{"line":120,"column":20,"offset":6497},"end":{"line":120,"column":35,"offset":6512},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"devlog.sudo"}},{"from":{"fname":"areas.devops","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":128,"column":5,"offset":3856},"end":{"line":128,"column":23,"offset":3874},"indent":[]},"value":"devlog.Ansible","alias":"devlog.Ansible"},{"from":{"fname":"devlog.terraform","vaultName":"Dendron"},"type":"backlink","position":{"start":{"line":15,"column":4,"offset":997},"end":{"line":15,"column":22,"offset":1015},"indent":[]},"value":"devlog.ansible","alias":"devlog.ansible"}],"anchors":{"ansible-components":{"type":"header","text":"Ansible Components","value":"ansible-components","line":24,"column":0,"depth":2},"inventory-file":{"type":"header","text":"Inventory File","value":"inventory-file","line":32,"column":0,"depth":2},"ad-hoc-commands-vs-playbooks":{"type":"header","text":"Ad-Hoc Commands VS Playbooks","value":"ad-hoc-commands-vs-playbooks","line":90,"column":0,"depth":2},"ad-hoc-commands":{"type":"header","text":"Ad-Hoc Commands","value":"ad-hoc-commands","line":99,"column":0,"depth":2},"the-shell-module":{"type":"header","text":"The Shell Module","value":"the-shell-module","line":101,"column":0,"depth":3},"the-script-module":{"type":"header","text":"The Script Module","value":"the-script-module","line":114,"column":0,"depth":3},"the-apt-module":{"type":"header","text":"The APT Module","value":"the-apt-module","line":128,"column":0,"depth":3},"the-service-module":{"type":"header","text":"The Service Module","value":"the-service-module","line":154,"column":0,"depth":3},"the-user--group-module":{"type":"header","text":"The User \u0026 Group Module","value":"the-user--group-module","line":176,"column":0,"depth":3},"resources":{"type":"header","text":"Resources","value":"resources","line":195,"column":0,"depth":2}},"children":[],"parent":"9gtn7g40cvqui0sifl1s7t5","data":{}},"body":"\u003ch1 id=\"ansible\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ansible\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eAnsible\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eAreas: \u003ca href=\"/notes/522ww47pqvt6y0yj8zparmy\"\u003eDevOps\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eRelated: \u003ca href=\"/notes/zbj9fmibk0nj56jkxz7jpzg\"\u003ePuppet\u003c/a\u003e, \u003ca href=\"/notes/306gnfs0uii610vyobkxknb\"\u003eChef\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003eAnsible is a configuration management system used to configure, automate,monitor, and troubleshoot devices in large networks.\u003c/li\u003e\n\u003cli\u003eIt is written in \u003ca href=\"/notes/wa4wthnhw54hd5wfyocyvqa\"\u003ePython\u003c/a\u003e and is open source under GPL License.\u003c/li\u003e\n\u003cli\u003eThere is a control node and many managed nodes (network devices we manage with Ansible). Windows OS is not supported as a control node at this moment (only \u003ca title=\"Private\" style=\"color: brown\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\"\u003edevlog.WSL (Private)\u003c/a\u003e);\u003c/li\u003e\n\u003cli\u003eAnsible uses an agentless architecture. No application is installed on the managed nodes and no daemon, process or agent is running;\u003c/li\u003e\n\u003cli\u003eAnsible uses for device configuration. Any system that can be configured using \u003ca href=\"/notes/o922t6d9q6wur3yve290hir\"\u003eSSH\u003c/a\u003e can also be configured using Ansible;\u003c/li\u003e\n\u003cli\u003eWhen managing Windows it users native PowerShell remote support instead of SSH;\u003c/li\u003e\n\u003cli\u003eIt is also known as an orchestration engine, used in large networks with many devices that need to be configured, maintained and troubleshooted in an automated way.\u003c/li\u003e\n\u003cli\u003eAnsible uses Modules which are scripts or units of work that do the actual job.\u003c/li\u003e\n\u003cli\u003eTheres no process that runs continuously on neither the controlling machine or the managed machine(s)\u003c/li\u003e\n\u003cli\u003eThe controlling node doesn't have be a privileged user, it can simply ssh into the managed node.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ansible-components\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ansible-components\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eAnsible Components\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eInventory is a list of managed nodes. An inventory file is also sometimes called a \"host file\". The inventory can specify information such as IP address, hostname or domain-name for each managed node. Default location: \u003ccode\u003e/etc/ansible/hosts\u003c/code\u003e (or use the \u003ccode\u003e-i\u003c/code\u003e flag to use a custom file). An inventory file can be formatted as an INI or YAML file.\u003c/li\u003e\n\u003cli\u003eModules are the units of code ansible executes. Each module has a particular use, from administering users on a specific type of database to managing VLAN interfaces on a specific type of network device or to installing, configuring and starting a specific server like for example Apache2 on a Linux distribution.\u003c/li\u003e\n\u003cli\u003eTasks are units of action in Ansible. You can execute a single task once with an Ad-Hoc command or multiple tasks in a playbook.\u003c/li\u003e\n\u003cli\u003ePlaybooks are ordered lists of tasks. We can run those tasks in that order repeatedly.\u003c/li\u003e\n\u003cli\u003ePlaybooks are written in YAML and are easy to read, write, share and understand.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"inventory-file\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#inventory-file\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eInventory File\u003c/h2\u003e\n\u003cp\u003eWithin the inventory file, we can organize our server into different groups, this will help us keep the host in order and permit us to use group variables. A host can be part of multiple groups.\u003c/p\u003e\n\u003cpre class=\"language-ini\"\u003e\u003ccode class=\"language-ini\"\u003e\u003cspan class=\"token section\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token section-name selector\"\u003eservers\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token key attr-name\"\u003evps1 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e207.154.254.221\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003evps2 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e167.122.186.63\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003evps3 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e139.59.155.232\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eansible_host\u003c/code\u003e is a predefined variable that holds the value of the managed hosts.\u003c/li\u003e\n\u003cli\u003eTo parse the inventory file and list all the hosts defined in the inventory file:\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eansible -i ./hosts --list-hosts all\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTo check if ansible is able to communicate with the hosts\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eansible -i ./hosts vps1 -m ping -u userName -k\u003c/code\u003e (to test for the whole group, use the group name such as: \u003ccode\u003eservers\u003c/code\u003e instead of \u003ccode\u003evps1\u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-m\u003c/code\u003e is for \"module\" in this case we're using the \u003ccode\u003eping\u003c/code\u003e module - it checks the ssh authentication for the each node.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-u\u003c/code\u003e defines the username that will connect to the remote hosts.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-k\u003c/code\u003e to prompt for password.\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003esshpass\u003c/code\u003e module must be installed on the controlling machine\u003c/li\u003e\n\u003cli\u003eEdit \u003ccode\u003e/etc/ansible/ansible.cfg\u003c/code\u003e to uncomment \u003ccode\u003ehost_key_checking = False\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eIf you want to test ssh communication for all the hosts in the inventory file, use option \"all\" instead of a group or a specific host\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTo get setup info\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eansible -i ./hosts servers -m setup -u student -k\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTo setup ssh authentication\u003c/li\u003e\n\u003cli\u003eYou can omit the \u003ccode\u003e-u\u003c/code\u003e and \u003ccode\u003e-k\u003c/code\u003e option you can declare them in the inventory file.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-ini\"\u003e\u003ccode class=\"language-ini\"\u003e\u003cspan class=\"token section\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token section-name selector\"\u003eservers\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token key attr-name\"\u003evps1 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e207.154.254.221\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003evps2 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e167.122.186.63\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003evps3 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e139.59.155.232\u003c/span\u003e\n\n\u003cspan class=\"token section\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token section-name selector\"\u003eservers:vars\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003estudent\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_ssh_pass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003eclearPW123\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_become_pass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003esudoPWroot\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_port\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e22\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eYou should use a vault to securely pass your credentials instead of hardcoding it.\u003c/li\u003e\n\u003cli\u003eTo overwrite variables for a specific host, such as using a different user to authenticate\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-ini\"\u003e\u003ccode class=\"language-ini\"\u003e\u003cspan class=\"token section\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token section-name selector\"\u003eservers\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token key attr-name\"\u003evps1 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e207.154.254.221 ansible_user=student2\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003evps2 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e167.122.186.63\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003evps3 ansible_host\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e139.59.155.232\u003c/span\u003e\n\n\u003cspan class=\"token section\"\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token section-name selector\"\u003eservers:vars\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_user\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003estudent\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_ssh_pass\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003eclearPW123\u003c/span\u003e\n\u003cspan class=\"token key attr-name\"\u003eansible_port\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token value attr-value\"\u003e22\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"ad-hoc-commands-vs-playbooks\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ad-hoc-commands-vs-playbooks\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eAd-Hoc Commands VS Playbooks\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAd-Hoc commands can be used to do quick and simple things like checking the logs, checking if a process is running, or installing a package on a list of servers.\u003c/li\u003e\n\u003cli\u003ePlaybooks are used for big deployments, orchestration or system configuration. We use the \u003ccode\u003eansible\u003c/code\u003e command to run an Ad-Hoc command and the \u003ccode\u003eansible-playbook\u003c/code\u003e command to run a playbook.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eansible\u003c/code\u003e is used to run Ad-Hoc commands. These commands are quick and easy but are not reusable. You don't save them for later, they demonstrate the simplicity and power of ansible.\n\u003cul\u003e\n\u003cli\u003eSome examples are rebooting servers, updating servers, copy files, manage package, users.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003ePlaybooks are scripts written in \u003ca title=\"Private\" style=\"color: brown\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\"\u003edevlog.YAML (Private)\u003c/a\u003e and are composed of one or more play in an ordered list and each play executes one or more tasks using ansible modules.\u003c/li\u003e\n\u003cli\u003eBoth Ad-Hoc commands and Playbooks use modules to perform different tasks. Modules are units of code that do the actual work in Ansible.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ad-hoc-commands\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ad-hoc-commands\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eAd-Hoc Commands\u003c/h2\u003e\n\u003ch3 id=\"the-shell-module\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-shell-module\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eThe Shell Module\u003c/h3\u003e\n\u003cp\u003eThe general syntax of running an Ad-Hoc command is:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eansible -i [path-to-invetory-file] [group-to-connect-to] -m [module] -a [module-arguments] -u [user] -k\u003c/code\u003e\n\u003ccode\u003eansible -i ./hosts servers -m shell -a \"df -h\" -u user1 -k\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eBy default ansible uses multi-threading, with 5 threads as the default. If you've more than 5 hosts, you can increase the threads using the \u003ccode\u003e-f\u003c/code\u003e option.\u003c/p\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m shell -a \"ip address show dev eth0 | grep ether | cut -d ' ' -f6 | grep -v \"\u003e\u003e\"\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"the-script-module\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-script-module\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eThe Script Module\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eThis module can be used to run a local shell script on a remote system.\u003c/li\u003e\n\u003cli\u003eThe classical method of doing something like this would be to first copy the script to the remote machines using \u003ca href=\"/notes/wosij89dfykieaipt38kees\"\u003escp\u003c/a\u003e, connect to it and run the script.\u003c/li\u003e\n\u003cli\u003eUsing the script module, the controlling machine's script is run on each host(in fact the local script is transferred to remote node and then executed).\u003c/li\u003e\n\u003cli\u003eThis module is also supported for Windows targets.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m scripts -a \"./backsup.sh\" --become -K\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e--become\u003c/code\u003e to run the script as \u003ca title=\"Private\" style=\"color: brown\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\"\u003edevlog.root (Private)\u003c/a\u003e on the host machines\n\u003ccode\u003e-K\u003c/code\u003e to prompt for \u003ca href=\"/notes/jqyxvlopjrxj27o648plyk9\"\u003esudo\u003c/a\u003e password (you can omit this if you've already declared it inside the inventory file)\u003c/p\u003e\n\u003ch3 id=\"the-apt-module\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-apt-module\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eThe APT Module\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eThis module automates software installation, removal and update.\u003c/li\u003e\n\u003cli\u003eIt allows you to manage packages on Ubuntu(Debian) Distributions.\u003c/li\u003e\n\u003cli\u003eIf you use other distros, use the corresponding package managers.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cp\u003eInstall a specific software on all the hosts.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003estate\u003c/code\u003e option indicates the desired state of a package.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts severs -m apt -a \"name=nmap state=present update_cache=true\" -u [user] -k --become -K\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRemove a specific software on all the hosts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts severs -m apt -a \"name=nmap state=absent purge=yes update_cache=true\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTo perform a full system update on all the hosts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m apt \"upgrade=full\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTo remove dependencies that are no longer required.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m apt \"autoremove=yes autoclean=yes\" --become\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"the-service-module\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-service-module\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eThe Service Module\u003c/h3\u003e\n\u003cp\u003eThis module is used to control the services running on the host nodes.\u003c/p\u003e\n\u003cp\u003eExamples:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTo start a service on all the hosts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m service -a \"name=ngnix state=started\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTo reload a service on all the hosts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m service -a \"name=ngnix state=restarted\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTo stop a service on all the hosts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m service -a \"name=ngnix state=stopped\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSet a service to start on boot on all the hosts.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m service -a \"name=ngnix enabled=yes\" --become\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"the-user--group-module\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-user--group-module\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eThe User \u0026#x26; Group Module\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eThis module is used to manage groups, user accounts and user attributes.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eExamples:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCreating a new group on all remote hosts\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m group -a \"name=developers state=present\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRemoving an existing group from all remote hosts\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eansible -i ./hosts servers -m group -a \"name=developers state=absent\" --become\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdding a new user to all remote hosts\n\u003cul\u003e\n\u003cli\u003eYou can give comma separated values if you want to add the user to multiple groups\u003c/li\u003e\n\u003cli\u003eThe last three options are optional\n\u003ccode\u003eansible -i ./hosts servers -m user -a \"name=johndoe state=present groups=developers create_home=yes comment=\\\"new user\\\" shell=/bin/bash generate_ssh_key=yes ssh_key_bits=2048\" --become\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"resources\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#resources\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eResources\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/geerlingguy/ansible-for-devops\"\u003egeerlingguy/ansible-for-devops: Ansible for DevOps examples.\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/522ww47pqvt6y0yj8zparmy\"\u003eDevOps\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/mkwoo3ek4y6bnddpy1iteb9\"\u003eTerraform\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"3nfl4nvv516muyzozhcwrw8","title":"/root","desc":"","updated":1655559901157,"created":1637610830605,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"581715455a6f0f7a699209e8521b4acf","links":[{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"archive.about","alias":"my","position":{"start":{"line":4,"column":9,"offset":37},"end":{"line":4,"column":29,"offset":57},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"archive.about"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"tags.areas","alias":"#areas","position":{"start":{"line":20,"column":111,"offset":1051},"end":{"line":20,"column":117,"offset":1057},"indent":[]},"xvault":false,"to":{"fname":"tags.areas"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"tags.areas","alias":"#areas","position":{"start":{"line":21,"column":3,"offset":1198},"end":{"line":21,"column":9,"offset":1204},"indent":[]},"xvault":false,"to":{"fname":"tags.areas"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes","alias":"swipes","position":{"start":{"line":27,"column":3,"offset":1724},"end":{"line":27,"column":13,"offset":1734},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.quotes","alias":"quotes","position":{"start":{"line":27,"column":48,"offset":1769},"end":{"line":27,"column":72,"offset":1793},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.quotes"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.excerpts","alias":"excerpts","position":{"start":{"line":27,"column":74,"offset":1795},"end":{"line":27,"column":102,"offset":1823},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.excerpts"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.sayings","alias":"sayings","position":{"start":{"line":27,"column":104,"offset":1825},"end":{"line":27,"column":130,"offset":1851},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.sayings"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"swipes.phrases","alias":"phrases","position":{"start":{"line":27,"column":132,"offset":1853},"end":{"line":27,"column":158,"offset":1879},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"swipes.phrases"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"resources.people","alias":"others","position":{"start":{"line":27,"column":214,"offset":1935},"end":{"line":27,"column":241,"offset":1962},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"resources.people"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"inbox.webmark","alias":"webmark","position":{"start":{"line":31,"column":235,"offset":2463},"end":{"line":31,"column":260,"offset":2488},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"inbox.webmark"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"slipbox.Ontology","alias":"slipbox.Ontology","position":{"start":{"line":55,"column":3,"offset":3735},"end":{"line":55,"column":23,"offset":3755},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"slipbox.Ontology"}},{"type":"wiki","from":{"fname":"root","id":"3nfl4nvv516muyzozhcwrw8","vaultName":"Dendron"},"value":"archive.about","alias":"About me","position":{"start":{"line":60,"column":3,"offset":3963},"end":{"line":60,"column":29,"offset":3989},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"archive.about"}}],"anchors":{"welcome-to-noetic-noggin":{"type":"header","text":"Welcome to Noetic Noggin","value":"welcome-to-noetic-noggin","line":8,"column":0,"depth":1},"principles":{"type":"header","text":"Principles","value":"principles","line":18,"column":0,"depth":2},"all-notes-should-be-relative-to-me":{"type":"header","text":"All notes should be relative to me.","value":"all-notes-should-be-relative-to-me","line":20,"column":0,"depth":3},"gotta-capture-em-all":{"type":"header","text":"Gotta capture 'em all","value":"gotta-capture-em-all","line":30,"column":0,"depth":3},"dont-force-evolution":{"type":"header","text":"Don't force evolution","value":"dont-force-evolution","line":40,"column":0,"depth":3},"noise--signal":{"type":"header","text":"Noise \u0026 Signal","value":"noise--signal","line":45,"column":0,"depth":3},"why-do-any-of-this":{"type":"header","text":"Why do any of this?","value":"why-do-any-of-this","line":50,"column":0,"depth":3},"structure-of-this-wiki":{"type":"header","text":"Structure of this wiki","value":"structure-of-this-wiki","line":59,"column":0,"depth":2},"quicklinks":{"type":"header","text":"Quicklinks","value":"quicklinks","line":64,"column":0,"depth":2}},"children":["0yay2om15bsg2li2p6qgux7","05c4nnjqa92zx11ld6o0ytn","9gtn7g40cvqui0sifl1s7t5","ftbd1hknsd3ocd7jao26tn3","a1kmkdbpclaz5p6sykaw6kc","z121gkmqfo09m8r7jgnpfgn","gkqrr7xbt18xhi93dmjrwzj","ja2x4lrgejr9o9wvit0bd0d","luv39odkfibx3wdosvigwvy","vtvk3bi6o72w58oima9xzf3","yy652kvqrkfn9ipk07m40h4"],"parent":null,"data":{},"body":"\n# Welcome to Noetic Noggin\n\nThis is [[my|archive.about]] personal wiki and a commonplace book; notes by me, for me.\n\n Permanently under construction \n\n![](https://res.cloudinary.com/zubayr/image/upload/v1658499909/wiki/ajevkuyebljlxiblyst2.png)\n\nThis wiki was made possible with [dendron.so](https://dendron.so) and [obisidian.md](https://obsidian.md). Stored on [Github Repository](https://github.com/zubayrrr/dendron) and hosted on [Netlify](https://netlify.com) for free.\n\n## Principles\n\n### All notes should be relative to me.\n\n- All notes in principle are written for me; what I know about a subject, how I feel about a particular thing.\n- Opinions are fine as long as I feel strong epistemic confidence in the given opinion.\n- Don't over explain a note if it's not necessary, remember, these notes are for you and are relative to whatever knowledge you posses about the subject.\n- Read books and make an dedicated notes for them.\n- Listen podcasts but capture them inside a \"subject specific\" note or \"Map of Concept\" note or a note tagged #areas. Because making notes from podcasts can be tedious as they're not as well structured as books for consumption.(Whose merit is debatable.)\n- #areas are basically \"Map of Concept\" notes but I have recently come to the realization that its better to maintain them [Nikita Voloboev style](https://wiki.nikiv.dev/) but with heavy usage of transclusion and backlinking.\n  - \"Resources\" should be first processed and then mentioned inside the note, otherwise they should be left in inbox.\n\n### Gotta capture 'em all\n\n- Hog whatever information tickles your pickle([anything that gratifies one's intellectual curiosity](https://news.ycombinator.com/newsguidelines.html)).\n- [[swipes]] are interesting/useful bits of... [[quotes|swipes.quotes]], [[excerpts|swipes.excerpts]], [[sayings|swipes.sayings]], [[phrases|swipes.phrases]]. Essentially, ideas, opinions that are swiped off from [[others|resources.people]].\n- Make no distinction between \"your\" ideas and ideas of \"others\", because if you vibe with an idea; it's already yours.\n- But also remember \"If you've time to consume, you've time to produce.\".\n- Use [raindrop.io](https://raindrop.io) to manage your URL bookmarks.\n- If you need to bookmark a webpage or an article all together, use [MarkDownload](https://chrome.google.com/webstore/detail/markdownload-markdown-web/pcmpcfapbekmbjjkdalcgopdkipoggdi?hl=en-GB) to rip the entire page. Let's call it a [[webmark|inbox.webmark]]; it belong in the `/inbox`.\n- Similar process is employed for capturing tweets using [tweet-to-markdown](https://github.com/kbravh/tweet-to-markdown) and it also belongs in the `/inbox`.\n\n### Don't force evolution\n\n- Let your second brain evolve at it's own pace.\n- The structure should never be _too_ rigid because its meant to take form by itself.\n\n### Noise \u0026 Signal\n\n- While capturing ideas left and right is recommended, make sure you're not harming your periods of focus.\n- Have impenetrable focus periods (use Pomodoro method) where you only care about the work on hand and nothing else.\n\n### Why do any of this?\n\n- Because I can't remember everything - there's a lot of information around that interests me and there isn't enough working memory installed in me.\n- So, I make notes - to remember, to create, to meditate, to think.\n- A bodybuilder's portfolio is their body - my portfolio is my wiki.\n- Not only am I making - whatever I know - tangible by writing it down. I know exactly where to look if I ever forget something.\n- I am at the beginning of my learning adventures. When I look back at it, I will know where I came from and how my thoughts evolved over time.\n- Plus, its really fun to nerd out.\n\n## Structure of this wiki\n\n- [[slipbox.Ontology]] explains the structure of this wiki and the tags, backlinks used in it.\n- Dendron takes care of the structure and hierarchy(mostly), but I insist on using tags for backwards compatibility.\n\n## Quicklinks\n\n- [[About me|archive.about]]\n- [Github](https://github.com/zubayrrr)\n- [Twitter](https://twitter.com/zoobhalu)\n- [Blog](https://zubayrali.in)\n- [Guestbook](https://www.yourworldoftext.com/~zubayrali/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{},"templateHierarchy":"template","insertNote":{"initialValue":"templates"}},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableHandlebarTemplates":true,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":true},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"theme":"dark","enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Noetic Noggin","description":"Personal Wiki / Digital Garden","author":"Zubayr Ali","twitter":"zoobhalu"},"github":{"enableEditLink":false,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"siteUrl":"localhost:3000","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"mwyyxjbpi0gztjd00f39biv"},"buildId":"4oDSInv8WeDX6cVSprjyl","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>