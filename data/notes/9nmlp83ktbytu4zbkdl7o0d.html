<h1 id="aws-elastic-beanstalk"><a aria-hidden="true" class="anchor-heading" href="#aws-elastic-beanstalk"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>AWS Elastic Beanstalk</h1>
<p>Elastic Beanstalk is a platform within AWS that is used for deploying and scaling web applications. In simple terms this platform as a service (PaaS) takes your application code and deploys it while provisioning the supporting architecture and compute resources required for your code to run. Elastic Beanstalk also fully manages the patching and security updates for those provisioned resources.</p>
<p>There is no charge to use Elastic Beanstalk to deploy your applications, you are only charged for the resources that are created to support your application.</p>
<p>AWS Elastic Beanstalk allows you to quickly deploy applications and services without having to worry about configuring underlying resources, services, operating systems or web servers.</p>
<p>Elastic Beanstalk takes care of the hosting infrastructure, coding language interpreter, operating system, security, https service and application layer. All you need to worry about is writing your code.</p>
<p>You can develop code in a number of languages which is then zipped up and the zip file is used when instantiating a new elastic beanstalk instance.</p>
<ul>
<li>via <a href="https://www.hava.io/blog/what-is-aws-elastic-beanstalk">What is AWS Elastic Beanstalk?</a></li>
</ul>
<p>When we create an Elastic Beanstalk environment , underneath it, we’re creating CloudFormation stack. We have the option of having Elastic Beanstalk within a CloudFormation template.</p>
<h2 id="application"><a aria-hidden="true" class="anchor-heading" href="#application"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Application</h2>
<p>It is a collection of components, environments, versions, configurations</p>
<h2 id="upload-version"><a aria-hidden="true" class="anchor-heading" href="#upload-version"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Upload version</h2>
<p>Upload artifact, source bundle a zip, tar, war, jar file.</p>
<h2 id="environment"><a aria-hidden="true" class="anchor-heading" href="#environment"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Environment</h2>
<p>A collection of AWS resources running application version.</p>
<h2 id="manage"><a aria-hidden="true" class="anchor-heading" href="#manage"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Manage</h2>
<p>For updating the application, you simply upload a new version and the rest is again taken care by Elastic Beanstalk.</p>
<h2 id="elastic-beanstalk-vs-aws-opsworks-vs-aws-cloudformation"><a aria-hidden="true" class="anchor-heading" href="#elastic-beanstalk-vs-aws-opsworks-vs-aws-cloudformation"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elastic Beanstalk VS <a href="/notes/oan62uepuhdo1ks88ohv6fs">AWS OpsWorks</a> VS <a href="/notes/7zaax8a13r0jjnssx46u39a">AWS CloudFormation</a></h2>
<ul>
<li>Elastic Beanstalk is geared towards developers and is the simplest to use but provides the least visibility of whats going on "under the hood". You can quickly deploy applications. It is great for testing. If you have a lot of dependencies and a complicated deployment process Elastic Beanstalk not be the best choice.</li>
<li>OpsWorks is a configuration management services that provides managed instances of <a href="/notes/306gnfs0uii610vyobkxknb">Chef</a> and <a href="/notes/zbj9fmibk0nj56jkxz7jpzg">Puppet</a>. Great for hybrid environments because if node is reachable by Chef or Puppet instances(On-prem), it can be registered with OpsWorks.</li>
<li>CloudFormation compared to Elastic Beanstalk deals more with AWS infrastructure rather than applications. It is geared towards system engineers, CloudFormation uses templates to create, replicate AWS infrastructure stacks rather than applications.</li>
</ul>
<h3 id="how-to-use-all-three-together"><a aria-hidden="true" class="anchor-heading" href="#how-to-use-all-three-together"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>How to use all three together?</h3>
<ul>
<li>CloudFormation has resource definitions for both Elastic Beanstalk  and OpsWorks, which would enable implementing both of them in CloudFormation stack.</li>
<li>Build the infrastructure with CloudFormation and manage applications with OpsWorks and Elastic Beanstalk.</li>
</ul>
<h2 id="create-an-elastic-beanstalk-application"><a aria-hidden="true" class="anchor-heading" href="#create-an-elastic-beanstalk-application"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Create an Elastic Beanstalk Application</h2>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655629696/wiki/kgz2k1qy0gt3433reler.png"></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655629915/wiki/qmwmq00kynqimsw13ehu.png"></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655630013/wiki/nsvk6zntgfhyb3iw4lcm.png"></p>
<h2 id="elastic-beanstalk-deployment-strategies"><a aria-hidden="true" class="anchor-heading" href="#elastic-beanstalk-deployment-strategies"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elastic Beanstalk deployment strategies</h2>
<p>We’ve two environment types in Elastic Beanstalk:</p>
<ul>
<li>Single instance 
<ul>
<li>Has elastic IP address</li>
<li>With a auto scaling group, you can have high availability even with a single instance.</li>
</ul>
</li>
<li>High availability
<ul>
<li>We have a group of instances</li>
<li>Auto scaling group</li>
<li>Load balancer</li>
</ul>
</li>
</ul>
<p>Deployment Methods</p>
<ul>
<li>All at once
<ul>
<li>Performs updates all at once</li>
<li>In place deployment - infrastructure doesn’t change at all</li>
<li>Fast and requires no DNS changes </li>
<li>Will complicate rollback a little bit</li>
<li>Increased down time if something goes wrong</li>
</ul>
</li>
<li>Rolling
<ul>
<li>Will guarantee one of the instance is up at all times</li>
<li>When update is ongoing - they’ll be detached from the load balancer</li>
<li>When the update is completed, they’re reattached, load balancer will perform health check(overhead)</li>
<li>Health checks failing may lead to different instances with different versions of applications </li>
</ul>
</li>
<li>Rolling/Additional batch
<ul>
<li>Updates are performed on newly created instances not on live instances</li>
<li>We double auto scaling group’s capacity so we don’t run into capacity issues</li>
<li>Takes longer than regular update(overhead)</li>
<li>Go with this when you can’t afford reduced capacity(downtime)</li>
</ul>
</li>
<li>Immutable
<ul>
<li>Instances are not changed(updated) they’re completely replaced</li>
<li>New instances with the update is added to Auto Scaling Group and previous instances are killed(only if the new deployment is successful)</li>
<li>Provides clean rollback</li>
<li>Needs doubling of instances for a short time</li>
</ul>
</li>
<li>Blue/Green
<ul>
<li>Entire environment is cloned(Auto Scaling Group and Load Balancer)</li>
<li>Update is deployed to the cloned environment </li>
<li>Route53 URLs are swapped with the updated instances once deployment is successful.</li>
<li>Prevents downtime because new resources are used</li>
<li>Can be tested in an isolated environment </li>
<li>Con: we’re doubling our resources, requires DNS name change</li>
</ul>
</li>
<li>Canary
<ul>
<li>Allows you to roll out new code/features to a subset of users as an initial test</li>
</ul>
</li>
</ul>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655632839/wiki/xxzvbggiv1zttmngmv42.png"></p>
<h2 id="elastic-beanstalk-environment-configuration-management"><a aria-hidden="true" class="anchor-heading" href="#elastic-beanstalk-environment-configuration-management"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elastic Beanstalk Environment configuration management</h2>
<ul>
<li>You can configure your Elastic Beanstalk Environment’s configuration using a fodler named <code>.ebextentions</code> inside which your config files go.</li>
<li>You can add specific settings for all of the components of your environment like taking care of dependencies, Auto Scaling Group etc.</li>
<li>We can also your configurations and load from them at a later point.</li>
<li>Changes made from CLI or console have highest precedence, next settings loaded from a saved configurations. Config files have the lowest priority.</li>
</ul>
<h2 id="creating-an-application"><a aria-hidden="true" class="anchor-heading" href="#creating-an-application"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Creating an application</h2>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655636669/wiki/s6mi2x0zkajvbyouj4f9.png"></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655636684/wiki/wizxch0khz30rpbrik71.png"></p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655636756/wiki/hh5vkabu8g4ycn1gk48o.png"></p>
<p>Behind the scenes, Elastic Beanstalk actually creates CloudFormation stack with the resources we specified.</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655636968/wiki/inimde4i38hupldmjkbq.png"></p>
<h2 id="elastic-beanstalk-docker-deployment"><a aria-hidden="true" class="anchor-heading" href="#elastic-beanstalk-docker-deployment"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elastic Beanstalk Docker Deployment</h2>
<p>Single containers can be deployed on Elastic Beanstalk but are not ideal for multi-tiered architectures. Dockerfile is mandatory. Docker run file is optional.</p>
<p>Multi-containers on single instances with <a href="/notes/y43l1e8ej1au0hfrdkqmdh7">AWS ECS</a>. Docker run file is mandatory. There are multiple ports to communicate with. Ideal for multi-processes applications.</p>
<p><img src="https://res.cloudinary.com/zubayr/image/upload/v1655652299/wiki/f41dktgd9nrubg6ivlmm.png"></p>
<h2 id="elastic-beanstalk-with-aws-rds"><a aria-hidden="true" class="anchor-heading" href="#elastic-beanstalk-with-aws-rds"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elastic Beanstalk with <a href="/notes/8cd8nzypmjgyeqzqwsdvzbv">AWS RDS</a></h2>
<p>You create an RDS database in your Elastic Beanstalk environment. When environment is deleted, RDS database is also deleted. It means your database is tightly coupled with your environment.</p>
<p>But it is possible to decouple the RDS database by creating it outside of Elastic Beanstalk. Better and safer for prod. This makes it much safer and you can connect the RDS database to multiple environments.</p>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/notes/522ww47pqvt6y0yj8zparmy">DevOps</a></li>
</ul>